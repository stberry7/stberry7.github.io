<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-P5MQZ5LK');</script>
  <!-- End Google Tag Manager -->

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-HMQ4MLP54Y"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-HMQ4MLP54Y');
  </script>

  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="description" content="Economic Data Hub: explore U.S. Federal Reserve (FRED) indicators, World Bank global data, U.S. mortgage rates, CD rates, and Housing Price Index with clear explanations and quick links to live dashboards." />
  <meta name="robots" content="index, follow, max-image-preview:large" />
  <meta name="theme-color" content="#ffffff" />
  <meta name="author" content="Economic Data Hub" />
  <link rel="preconnect" href="https://www.googletagmanager.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />

  <title>Economic Data Hub — FRED, World Bank, Mortgage, CD &amp; Housing Index</title>

  <!-- Open Graph / Twitter for better previews -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Economic Data Hub — FRED, World Bank, Mortgage, CD &amp; Housing Index">
  <meta property="og:description" content="Track key U.S. and global indicators with quick links to live dashboards, including a Housing Price Index tool." />
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Economic Data Hub — FRED, World Bank, Mortgage, CD &amp; Housing Index">
  <meta name="twitter:description" content="Track key U.S. and global indicators with quick links to live dashboards, including a Housing Price Index tool.">

  <!-- JSON-LD (SEO) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Economic Data Hub",
    "description": "Explore Federal Reserve (FRED), World Bank, Mortgage, CD rates, and Housing Price Index dashboards.",
    "about": [
      {"@type":"Thing","name":"Federal Reserve Economic Data"},
      {"@type":"Thing","name":"World Bank Data"},
      {"@type":"Thing","name":"Mortgage Rates"},
      {"@type":"Thing","name":"Certificate of Deposit (CD) Rates"},
      {"@type":"Thing","name":"Housing Price Index"}
    ]
  }
  </script>

  <style>
    :root{
      --bg: #f5f7fb;
      --panel: #ffffff;
      --ink: #0f172a;
      --muted: #475569;
      --brand: #2563eb;
      --accent: #06b6d4;
      --radius: 16px;
      --shadow: 0 6px 24px rgba(16,24,40,.06);
      --maxw: 1180px;
      --border: 1px solid #e5e7eb;
    }

    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--ink);
      background:
        radial-gradient(600px 300px at 10% -5%, rgba(37,99,235,.10), transparent 60%),
        radial-gradient(800px 400px at 110% 10%, rgba(6,182,212,.12), transparent 60%),
        var(--bg);
      -webkit-text-size-adjust:100%; text-size-adjust:100%;
    }

    /* Decorative background (disabled on small screens for performance) */
    #bg { position:fixed; inset:0; width:100vw; height:100vh; object-fit:cover;
      z-index:-2; opacity:.07; filter:saturate(.9) contrast(1.05); pointer-events:none; }
    #scrim { position:fixed; inset:0; z-index:-1;
      background:linear-gradient(to bottom, rgba(255,255,255,.85), rgba(255,255,255,.95)); pointer-events:none; }

    .wrap{max-width:var(--maxw); margin:0 auto; padding:28px clamp(16px, 4vw, 28px);}
    header.hero{
      background:var(--panel); border-radius:var(--radius); box-shadow:var(--shadow);
      padding:clamp(18px, 3.2vw, 32px); margin:20px 0 24px; border: var(--border);
      position:relative; overflow:hidden;
    }
    header.hero::before{ content:""; position:absolute; inset:0 0 auto 0; height:4px;
      background: linear-gradient(90deg, var(--brand), var(--accent)); }
    header.hero h1{margin:0 0 8px; font-size:clamp(1.5rem, 3vw, 2.1rem)}
    header.hero p{margin:0; color:var(--muted); font-size:clamp(1rem, 1.8vw, 1.06rem)}

    /* Grid */
    .grid{ display:grid; grid-template-columns: repeat(12, 1fr);
      gap: clamp(14px, 2.2vw, 22px); align-items:stretch; }
    .card{
      grid-column: span 6;
      background:var(--panel); border-radius:var(--radius); box-shadow:var(--shadow);
      padding:clamp(18px, 2.6vw, 26px); display:flex; flex-direction:column; gap:12px;
      min-height: 260px; border: var(--border);
    }
    .card h2{margin:0; font-size:clamp(1.1rem, 2.2vw, 1.35rem)}
    .card p{margin:0; color:var(--muted); line-height:1.55; font-size:clamp(1rem, 1.6vw, 1.06rem)}
    .card ul{margin:.35rem 0 0 1.1rem; color:var(--muted);}
    .cta{ margin-top:auto; display:flex; flex-wrap:wrap; gap:10px; }

    .btn{
      appearance:none; border:0; text-decoration:none; cursor:pointer;
      background:linear-gradient(180deg, var(--brand), #1d4ed8); color:#fff; font-weight:700;
      padding:12px 16px; border-radius:12px; box-shadow:0 4px 14px rgba(37,99,235,.25);
      font-size:clamp(.95rem, 1.6vw, 1.02rem);
      transition: transform .06s ease, filter .15s ease;
    }
    .btn:hover{ filter:brightness(.98) }
    .btn:active{ transform:translateY(1px) }

    .explainer{ grid-column: 1 / -1; background:var(--panel); border-radius:var(--radius);
      box-shadow:var(--shadow); padding:clamp(18px, 3vw, 28px); border: var(--border); }
    .explainer h3{margin:0 0 .5rem; font-size:clamp(1.1rem, 2.2vw, 1.3rem)}
    .explainer p{margin:.25rem 0; color:var(--muted); font-size:clamp(1rem, 1.6vw, 1.06rem)}

    footer.site{
      margin:22px 0 10px; background:#ffffff; border-radius:12px; padding:12px 16px;
      box-shadow:var(--shadow); border: var(--border); display:flex; align-items:center;
      justify-content:flex-start; font-size:clamp(.9rem, 1.4vw, .98rem); color:#1f2937;
    }

    /* Mobile optimization */
    @media (max-width: 980px){
      .card{ grid-column: span 12; }
      .wrap{ padding:22px 16px; }
      footer.site{ justify-content:center; text-align:center; }
    }
    @media (max-width: 540px){
      #bg{ display:none; } /* don't render bg image on small screens */
      .btn{ width:100%; text-align:center; } /* easier tapping */
    }

    /* Accessibility helpers (for screen readers and crawlable content) */
    .sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0; }
  </style>
<style>
/* === Visitor counter bar (Total/Today/Week/Month) === */
.counter-bar{
  display:grid; grid-template-columns: repeat(12,1fr);
  gap: clamp(12px, 2vw, 18px); align-items:stretch;
  background: var(--panel, #0f172a);
  border-radius: var(--radius, 14px);
  box-shadow: var(--shadow, 0 2px 12px rgba(0,0,0,.25));
  border: var(--border, 1px solid rgba(255,255,255,.08));
  padding: clamp(14px, 2.2vw, 20px); margin: 8px 0 20px;
}
.counter-bar .metric{
  grid-column: span 3; display:flex; flex-direction:column;
  background: var(--card, #ffffff);
  color: var(--text, #0b1220);
  border: var(--border, 1px solid rgba(0,0,0,.08));
  border-radius: 12px;
  padding: 12px 14px; min-height: 72px; justify-content:center;
}
.counter-bar .label{ color: var(--muted, #6b7280); font-size:.95rem; margin-bottom:4px; }
.counter-bar .value{ font-weight:700; font-size:1.25rem; line-height:1; }
@media (max-width: 980px){ .counter-bar .metric{ grid-column: span 6; } }
@media (max-width: 540px){ .counter-bar .metric{ grid-column: span 12; } }
</style>
<style>
/* === Compact bottom visitor counter overrides === */
@media screen {
  .counter-bar{
    position: fixed; bottom: 12px; right: 12px; z-index: 99999;
    display: flex; align-items: center; gap: 10px;
    background: rgba(15,23,42,.75); /* slate-900 w/ opacity */
    color: #e6eefc;
    border: 1px solid rgba(255,255,255,.12);
    border-radius: 9999px;
    padding: 6px 10px;
    box-shadow: 0 6px 20px rgba(0,0,0,.35);
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    font-size: 12px;
  }
  .counter-bar .metric{
    display: inline-flex; align-items: baseline; gap: 4px;
    background: transparent; border: 0; padding: 0; min-height: 0;
    color: inherit;
  }
  .counter-bar .label{ font-size: 12px; opacity: .8; margin: 0; }
  .counter-bar .value{ font-size: 12px; font-weight: 700; line-height: 1; }
  /* thin separators between items */
  .counter-bar .metric + .metric{ padding-left: 10px; border-left: 1px solid rgba(255,255,255,.18); }
  @media (max-width: 420px){
    .counter-bar{ font-size: 11px; gap: 8px; padding: 6px 8px; bottom: 10px; right: 10px; }
    .counter-bar .label, .counter-bar .value{ font-size: 11px; }
  }
}
@media print { .counter-bar{ display: none !important; } }
</style>
<style>
/* === Tiny bottom-center visitor counter (shows near footer only) === */
.counter-bar{
  position: fixed; z-index: 99999;
  left: 50%; right: auto;
  bottom: calc(env(safe-area-inset-bottom, 0px) + 14px);
  transform: translateX(-50%);
  display: inline-flex; align-items: center; gap: 6px;
  background: rgba(17, 24, 39, .72); /* slate-900ish */
  color: #e6eefc;
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 9999px;
  padding: 4px 8px;
  box-shadow: 0 6px 18px rgba(0,0,0,.35);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  font-size: 10px;  /* tiny */
  line-height: 1.1;
  opacity: 0;                /* hidden by default */
  pointer-events: none;      /* non-interactive */
  transition: opacity .25s ease, transform .25s ease;
}
.counter-bar .metric{
  display: inline-flex; align-items: baseline; gap: 3px;
  background: transparent; border: 0; padding: 0; min-height: 0;
  color: inherit;
}
.counter-bar .label{ font-size: 10px; opacity: .75; margin: 0; }
.counter-bar .value{ font-size: 10px; font-weight: 700; line-height: 1; }
.counter-bar .metric + .metric{ padding-left: 8px; border-left: 1px solid rgba(255,255,255,.18); }
.counter-bar.show{
  opacity: 1;
  transform: translateX(-50%) translateY(0);
  pointer-events: auto;
}
.counter-bar.hidden{
  opacity: 0;
  transform: translateX(-50%) translateY(8px) scale(.96);
}
@media (max-width: 420px){
  .counter-bar{ font-size: 9px; padding: 4px 7px; gap: 5px; bottom: calc(env(safe-area-inset-bottom, 0px) + 10px); }
  .counter-bar .label, .counter-bar .value{ font-size: 9px; }
}
@media print { .counter-bar{ display: none !important; } }
</style>
<style>
/* === Tiny footer counter v2: smaller + topmost === */
.counter-bar{
  z-index: 2147483000 !important;
  padding: 3px 6px !important;
  font-size: 9px !important;
  bottom: calc(env(safe-area-inset-bottom, 0px) + 10px) !important;
  gap: 5px !important;
}
.counter-bar .label, .counter-bar .value{ font-size: 9px !important; }
.counter-bar .metric + .metric{ padding-left: 6px !important; }
@media (max-width: 420px){
  .counter-bar{ font-size: 8.5px !important; padding: 3px 6px !important; }
  .counter-bar .label, .counter-bar .value{ font-size: 8.5px !important; }
}
</style>
<style>
/* === White background + black text theme for tiny footer counter === */
.counter-bar{
  background: #ffffff !important;
  color: #111827 !important; /* near-black */
  border: 1px solid #e5e7eb !important; /* light gray border */
  box-shadow: 0 8px 24px rgba(0,0,0,.12) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}
.counter-bar .label{ color: #374151 !important; } /* gray-700 */
.counter-bar .value{ color: #111827 !important; }
.counter-bar .metric + .metric{ border-left: 1px solid #d1d5db !important; } /* gray-300 */
@media (max-width: 420px){
  .counter-bar{ background: #ffffff !important; color: #111827 !important; }
}
@media print { .counter-bar{ display: none !important; } }
</style>
</head>
<body>
<!-- Site Visitors (Total / Today / This Week / This Month) -->
<section class="counter-bar" id="site-metrics" aria-label="Site visitor counters">
  <div class="metric">
    <span class="label">Total</span>
    <span class="value" id="vis-total">—</span>
  </div>
  <div class="metric">
    <span class="label">Today</span>
    <span class="value" id="vis-today">—</span>
  </div>
  <div class="metric">
    <span class="label">This Week</span>
    <span class="value" id="vis-week">—</span>
  </div>
  <div class="metric">
    <span class="label">This Month</span>
    <span class="value" id="vis-month">—</span>
  </div>
</section>

  <img id="bg" alt="Decorative gradient background" src="" />
  <div id="scrim" aria-hidden="true"></div>

  <div class="wrap">
    <header class="hero">
      <h1>Economic Data Hub</h1>
      <p>Explore U.S. Federal Reserve (FRED) indicators, World Bank global datasets, U.S. mortgage rates, CD rates, and the Housing Price Index — explained clearly, linked fast.</p>
    </header>

    <section class="grid" aria-label="Data dashboards">
      <!-- FRED -->
      <article class="card" id="fred">
        <h2>Federal Reserve (FRED) Indicators</h2>
        <p>
          FRED aggregates U.S. macro time series: unemployment (U‑3), CPI &amp; core inflation, Fed Funds rate,
          GDP (BEA), payroll employment (BLS), and more.
        </p>
        <ul>
          <li>Spot turning points in labor, prices, and policy</li>
          <li>Aligned frequencies and recession shading</li>
          <li>Easy export for spreadsheets and models</li>
        </ul>
        <div class="cta">
          <a class="btn" href="fed.html" aria-label="Open FRED Dashboard">Open FRED Dashboard</a>
        </div>
      </article>

      <!-- World Bank -->
      <article class="card" id="worldbank">
        <h2>World Bank Global Data</h2>
        <p>
          Compare economies worldwide: GDP (nominal/real/per‑capita), inflation, trade balance, FDI, savings, debt,
          and hundreds of development indicators.
        </p>
        <ul>
          <li>Country &amp; region filters with standard definitions</li>
          <li>Per‑capita and growth‑rate views for fair comparisons</li>
          <li>CSV/JSON downloads for research and teaching</li>
        </ul>
        <div class="cta">
          <a class="btn" href="worldbank/worldbank.html" aria-label="Open World Bank Dashboard">Open World Bank</a>
        </div>
      </article>

      <!-- Mortgage -->
      <article class="card" id="mortgage">
        <h2>U.S. Mortgage Rates</h2>
        <p>
          Follow mortgage benchmarks (e.g., 30‑year fixed) and spreads versus Treasuries to gauge
          affordability and financing conditions.
        </p>
        <ul>
          <li>Historical highs/lows with recent movements</li>
          <li>Macro context: inflation, policy, term premia</li>
          <li>Export‑ready charts for reports</li>
        </ul>
        <div class="cta">
          <a class="btn" href="mortgage.html" aria-label="Open Mortgage Rates Dashboard">Open Mortgage Rates</a>
        </div>
      </article>

      <!-- CD Rates -->
      <article class="card" id="cd">
        <h2>Bank CD Rates</h2>
        <p>
          Track promotional CD yields by term (3m–60m) across institutions to compare safe opportunities and laddering strategies.
        </p>
        <ul>
          <li>Term‑by‑term APY comparison</li>
          <li>Identify yield curves &amp; specials at a glance</li>
          <li>Export tables to CSV</li>
        </ul>
        <div class="cta">
          <a class="btn" href="cd.html" aria-label="Open CD Rates Dashboard">Open CD Dashboard</a>
        </div>
      </article>

      <!-- Housing Price Index (NEW) -->
      <article class="card" id="housing">
        <h2>Housing Price Index</h2>
        <p>
          Explore regional housing price indexes with state filters, Top/Bottom rankings, and percentile views.
          Single‑file dashboard optimized for GitHub Pages.
        </p>
        <ul>
          <li>Large legend + search</li>
          <li>Top/Bottom N &amp; percentiles</li>
          <li>PNG &amp; CSV export</li>
        </ul>
        <div class="cta">
          <!-- <a class="btn" href="housing/housing.html" aria-label="Open Housing Price Index Dashboard">Open Housing Dashboard</a> -->
          <!-- <a class="btn" href="/housing/" aria-label="Open Housing Price Index Dashboard">Open Housing Dashboard</a> -->
          <a class="btn" href="housing.html" aria-label="Open Housing Price Index Dashboard"> Open Housing Dashboard</a>
        </div>
      </article>

      <!-- Full-width explainer -->
      <aside class="explainer" id="how-to">
        <h3>How to use this hub</h3>
        <p><strong>Start broad, then drill down:</strong> Begin with FRED for the U.S. macro picture, then open World Bank for international comparisons.</p>
        <p><strong>Connect macro to personal finance:</strong> Mortgage and CD sections translate macro drivers into real‑world rates you can act on.</p>
        <p><strong>Zoom into housing:</strong> Use the Housing Price Index tool to analyze metro/state trends and export series for your models.</p>
        <p><strong>Export anything:</strong> Each dashboard supports downloading the data/visuals—handy for weekly updates or presentations.</p>
        <p class="sr-only">Keywords: FRED, Federal Reserve Economic Data, World Bank indicators, GDP, CPI, unemployment, mortgage rates, CD rates, APY, US economy, global economy, housing price index.</p>
      </aside>
    </section>

    <footer class="site">
      <span><span id="copyright-sentinel">Copyright © 2023–2025</span></span>
    </footer>

    <noscript>
      <p>This site uses JavaScript to render interactive dashboards (FRED, World Bank, Mortgage, CD, and Housing pages). If JavaScript is disabled, please enable it for the best experience.</p>
    </noscript>
  </div>

  <script>
    // Only load decorative background on screens wider than 540px
    (function(){
      var el = document.getElementById('bg');
      if (window.matchMedia && window.matchMedia('(max-width: 540px)').matches) {
        // skip loading to improve mobile performance
        el && el.parentNode && el.parentNode.removeChild(el);
        return;
      }
      var imgs = [];
      for (var i = 1; i <= 13; i++) imgs.push('image/index/flower/F' + ('00'+i).slice(-3) + '.jpeg');
      for (var j = 1; j <= 8; j++) imgs.push('image/index/flower/J' + ('00'+j).slice(-3) + '.jpg');
      var eng = ['image/index/engineering/image (1).png','image (2).png','image (3).png','image (4).png'].map(function(n){return 'image/index/engineering/'+n;});
      imgs = imgs.concat(eng);
      if(el){ el.src = imgs[Math.floor(Math.random()*imgs.length)]; }
    })();
  </script>
<script>
(function(){
  // ====== Settings ======
  // true : count every refresh as a view
  // false: "unique per browser & period" (Total once ever, Day/Week/Month once per period)
  const FORCE_VIEW_MODE = false;

  // Namespace per site (use host, replace dots)
  const NAMESPACE = (location.hostname || 'localhost').replace(/\./g,'-');

  // ====== Date helpers ======
  const now = new Date();
  const y = now.getFullYear();
  const m = String(now.getMonth()+1).padStart(2,'0');
  const d = String(now.getDate()).padStart(2,'0');
  const YMD = `${y}-${m}-${d}`;
  const YM  = `${y}-${m}`;
  function getISOWeek(date){
    const tmp = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));
    const dayNum = tmp.getUTCDay() || 7; // 1..7 Mon..Sun
    tmp.setUTCDate(tmp.getUTCDate() + 4 - dayNum);
    const yearStart = new Date(Date.UTC(tmp.getUTCFullYear(),0,1));
    const weekNo = Math.ceil((((tmp - yearStart)/86400000) + 1) / 7);
    return { year: tmp.getUTCFullYear(), week: String(weekNo).padStart(2,'0') };
  }
  const wk = getISOWeek(now);
  const YW = `${wk.year}-W${wk.week}`;

  // ====== Keys ======
  const K_TOTAL = `site:total`;
  const K_DAY   = `site:day:${YMD}`;
  const K_WEEK  = `site:week:${YW}`;
  const K_MONTH = `site:month:${YM}`;

  // ====== CountAPI helpers ======
  const base = 'https://api.countapi.xyz';
  const hit = key => fetch(`${base}/hit/${encodeURIComponent(NAMESPACE)}/${encodeURIComponent(key)}`).then(r=>r.json());
  const get = key => fetch(`${base}/get/${encodeURIComponent(NAMESPACE)}/${encodeURIComponent(key)}`).then(r=>r.json());

  async function safeGet(key){
    try{
      const res = await get(key);
      return (res && typeof res.value === 'number') ? res.value : 0;
    }catch(e){ return 0; }
  }

  // LocalStorage markers for "unique per period"
  function markKey(scope, token){
    try{ localStorage.setItem(`viscount:${scope}`, token); }catch(e){}
  }
  function isMarked(scope, token){
    try{ return localStorage.getItem(`viscount:${scope}`) === token; }catch(e){ return false; }
  }

  async function maybeHit(scope, key, token){
    if (FORCE_VIEW_MODE || !isMarked(scope, token)){
      try{ await hit(key); }catch(e){}
      if (!FORCE_VIEW_MODE) markKey(scope, token);
    }
  }

  (async function run(){
    await Promise.all([
      maybeHit('total', K_TOTAL, '1'),
      maybeHit('day',   K_DAY,   YMD),
      maybeHit('week',  K_WEEK,  YW),
      maybeHit('month', K_MONTH, YM),
    ]);

    const [vTotal, vDay, vWeek, vMonth] = await Promise.all([
      safeGet(K_TOTAL), safeGet(K_DAY), safeGet(K_WEEK), safeGet(K_MONTH)
    ]);

    const el = id => document.getElementById(id);
    const fmt = n => (typeof n === 'number' ? n.toLocaleString() : String(n));

    if (el('vis-total')) el('vis-total').textContent = fmt(vTotal);
    if (el('vis-today')) el('vis-today').textContent = fmt(vDay);
    if (el('vis-week'))  el('vis-week').textContent  = fmt(vWeek);
    if (el('vis-month')) el('vis-month').textContent = fmt(vMonth);
  })();
})();
</script>
<script>
(function(){
  const bar = document.querySelector('.counter-bar');
  if(!bar) return;
  // start hidden
  bar.classList.add('hidden');

  let sentinel = document.getElementById('copyright-sentinel');
  if(!sentinel){
    // As a secondary fallback, try to find a footer element.
    sentinel = document.querySelector('footer') || document.body;
  }

  try{
    const obs = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){
          bar.classList.add('show'); bar.classList.remove('hidden');
        }else{
          bar.classList.remove('show'); bar.classList.add('hidden');
        }
      });
    }, { root: null, threshold: 0, rootMargin: '0px 0px -20% 0px' });
    obs.observe(sentinel);
  }catch(e){
    // If IntersectionObserver is not available, just show it near the bottom after slight delay.
    setTimeout(()=>{ bar.classList.add('show'); bar.classList.remove('hidden'); }, 1200);
  }
})();
</script>
<script id="visitor-counter-visibility-controller-v2">
(function(){
  const bar = document.querySelector('.counter-bar');
  if(!bar) return;
  bar.classList.add('hidden');

  const show = ()=>{ bar.classList.add('show'); bar.classList.remove('hidden'); };
  const hide = ()=>{ bar.classList.remove('show'); bar.classList.add('hidden'); };

  // Try IntersectionObserver on copyright sentinel or footer
  let ioUsed = false;
  let sentinel = document.getElementById('copyright-sentinel') || document.querySelector('footer');
  try{
    if (sentinel && 'IntersectionObserver' in window){
      const obs = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{ e.isIntersecting ? show() : hide(); });
      }, { root: null, threshold: 0 });
      obs.observe(sentinel);
      ioUsed = true;
    }
  }catch(e){ /* ignore */ }

  // Scroll fallback: show when near bottom (>=92% scrolled)
  function nearBottom(){
    const doc = document.documentElement || document.body;
    const total = Math.max(doc.scrollHeight, window.innerHeight);
    const progress = (window.scrollY + window.innerHeight) / total;
    return progress >= 0.92;
  }
  function check(){ nearBottom() ? show() : hide(); }

  function throttle(fn, delay){
    let t = 0, pend = false;
    return function(){
      const now = Date.now();
      if(now - t > delay){ t = now; fn(); }
      else if(!pend){ pend = true; setTimeout(()=>{ pend = false; t = Date.now(); fn(); }, delay); }
    };
  }

  window.addEventListener('scroll', throttle(check, 120), { passive: true });
  window.addEventListener('resize', throttle(check, 120));
  // Run once on load
  check();

  // If IO is used, scroll fallback will still keep it consistent.
})();
</script>
</body>
</html>
