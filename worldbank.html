<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Economic Indicators Dashboard 2025 | World Bank Data | GDP, Trade, Investment | Free Economic Charts</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="FREE Global Economic Dashboard 2025 | Monitor GDP, Trade, and Investment indicators from World Bank | Track global economic data for US, China, Japan, Germany, South Korea, and more with interactive charts">
    <meta name="keywords" content="World Bank data dashboard, global economic indicators, GDP growth rate, trade data, FDI inflows, international economic data, global economic charts, World Bank API, economic analysis tools, global GDP tracker, trade balance, investment flows, economic forecasting">
    <meta name="author" content="Global Economic Dashboard">
    <meta name="robots" content="index, follow">
    <meta name="language" content="en">
    
    <!-- Open Graph Meta Tags (for social media sharing) -->
    <meta property="og:title" content="FREE Global Economic Dashboard 2025 | World Bank Data">
    <meta property="og:description" content="Track global economic indicators FREE! World Bank data including GDP, trade, investment data for major economies. Updated annually with interactive charts.">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="Global Economic Indicators Dashboard">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="FREE Global Economic Dashboard | World Bank Data">
    <meta name="twitter:description" content="Track global economic indicators FREE! GDP, trade, investment data from World Bank for major economies.">
    
    <!-- Search Engine Optimization -->
    <meta name="theme-color" content="#1f77b4">
    <link rel="canonical" href="https://yourdomain.com/worldbank">
    
    <!-- Additional SEO Meta Tags -->
    <meta name="geo.region" content="WORLD">
    <meta name="geo.placename" content="Global">
    <meta name="distribution" content="global">
    <meta name="rating" content="general">
    <meta name="revisit-after" content="1 month">
    <meta name="expires" content="never">
    <meta http-equiv="content-language" content="en-us">
    
    <!-- Favicon and Icons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/chart.js" as="script">
    <link rel="dns-prefetch" href="//api.worldbank.org">
    
    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Global Economic Indicators Dashboard 2025",
        "description": "FREE comprehensive global economic dashboard monitoring GDP, trade, and investment indicators from World Bank Open Data. Track economic performance across major economies including United States, China, Japan, Germany, South Korea, India, and Brazil with interactive charts and historical analysis.",
        "url": "",
        "applicationCategory": "BusinessApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "creator": {
            "@type": "Organization",
            "name": "Global Economic Dashboard"
        },
        "keywords": [
            "World Bank data",
            "global economic indicators",
            "GDP growth rate",
            "trade data",
            "FDI inflows",
            "gross fixed capital formation",
            "economic analysis",
            "international economics",
            "global GDP tracker",
            "trade balance",
            "investment flows",
            "economic comparison"
        ],
        "inLanguage": "en",
        "isAccessibleForFree": true,
        "featureList": [
            "Global economic indicators monitoring",
            "GDP (Nominal, Real, Per Capita, Growth Rate)",
            "Trade data (Exports, Imports, Trade Balance)",
            "Investment data (FDI inflows, Capital Formation)",
            "Multi-country comparison charts",
            "World Bank Open Data integration",
            "Interactive historical charts",
            "Mobile responsive design",
            "Data download functionality (CSV/Excel)",
            "Annual data updates",
            "Free access with no registration required"
        ]
    }
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Arial', sans-serif; 
            background: linear-gradient(135deg, #1f77b4 0%, #2980b9 100%); 
            min-height: 100vh; 
            padding: 20px; 
        }
        .container { 
            max-width: 1400px; 
            margin: 0 auto; 
            background: rgba(255, 255, 255, 0.95); 
            border-radius: 20px; 
            padding: 30px; 
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1); 
        }
        h1 { 
            text-align: center; 
            color: #1f77b4; 
            margin-bottom: 20px; 
            font-size: 2.5rem; 
            font-weight: bold; 
        }
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }
        .last-updated { 
            text-align: center; 
            color: #666; 
            margin-bottom: 30px; 
            font-size: 0.9rem; 
        }
        .indicators-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); 
            gap: 15px; 
            margin-bottom: 20px; 
        }
        .category { 
            background: #fff; 
            border-radius: 12px; 
            padding: 20px; 
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.06); 
            border: 1px solid #e8e8e8; 
            transition: transform 0.2s ease, box-shadow 0.2s ease; 
        }
        .category:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1); 
        }
        .category h2 { 
            color: #1f77b4; 
            margin-bottom: 15px; 
            font-size: 1.3rem; 
            border-bottom: 2px solid #e8e8e8; 
            padding-bottom: 8px; 
        }
        .indicator { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 12px; 
            margin-bottom: 8px; 
            background: #f8f9fa; 
            border-radius: 8px; 
            border: 1px solid #e9ecef; 
            cursor: pointer; 
            transition: all 0.2s ease; 
        }
        .indicator:hover { 
            background: #e3f2fd; 
            border-color: #1f77b4; 
            transform: translateX(3px); 
        }
        .indicator-name { 
            font-weight: bold; 
            color: #2c3e50; 
            font-size: 0.95rem; 
        }
        .indicator-name-eng { 
            font-size: 0.75rem; 
            color: #7f8c8d; 
            font-weight: normal; 
            margin-top: 2px; 
        }
        .indicator-value { 
            font-weight: bold; 
            font-size: 1rem; 
            min-width: 80px; 
            text-align: right; 
        }
        .indicator-date { 
            font-size: 0.7rem; 
            color: #999; 
            margin-top: 2px; 
        }
        .positive { color: #27ae60; }
        .negative { color: #e74c3c; }
        .neutral { color: #3498db; }
        .warning { color: #f39c12; }
        .mobile-load { 
            color: #9b59b6; 
            font-size: 0.8em; 
            cursor: pointer;
            opacity: 0.8;
        }
        .mobile-load:hover { 
            opacity: 1; 
            text-decoration: underline;
        }
        .loading { 
            color: #95a5a6; 
            animation: pulse 1.5s infinite; 
        }
        @keyframes pulse { 
            0%, 100% { opacity: 1; } 
            50% { opacity: 0.5; } 
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .cache-status { 
            font-size: 0.65rem; 
            padding: 2px 6px; 
            border-radius: 10px; 
            font-weight: bold; 
            text-transform: uppercase; 
        }
        .cache-hit { 
            background: #d4edda; 
            color: #155724; 
        }
        .cache-fresh { 
            background: #cce5ff; 
            color: #004085; 
        }
        .cache-loading { 
            background: #f8f9fa; 
            color: #6c757d; 
            animation: pulse 1s infinite; 
        }
        
        /* World Bank Specific Styles */
        .world-bank-section {
            margin-top: 20px;
        }
        
        .world-bank-gdp, .world-bank-trade, .world-bank-investment {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-left: 4px solid #1f77b4;
        }
        
        .wb-country-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .wb-indicator-group {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid #dee2e6;
        }
        
        .wb-indicator-group h3 {
            color: #1f77b4;
            font-size: 1.1rem;
            margin-bottom: 15px;
            text-align: center;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 8px;
        }
        
        .wb-indicators {
            display: grid;
            gap: 12px;
        }
        
        .wb-indicator {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            transition: all 0.2s ease;
        }
        
        .wb-indicator:hover {
            background: #e3f2fd;
            border-color: #1f77b4;
            transform: translateY(-2px);
        }
        
        .wb-logo {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        /* Chart Container Styles */
        .chart-container {
            margin-top: 15px;
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            display: none;
            width: 100%;
            box-sizing: border-box;
        }
        
        .chart-content {
            width: 100%;
        }
        
        .chart-wrapper {
            position: relative;
            width: 100%;
            height: 400px;
            margin-bottom: 20px;
        }
        
        .chart-wrapper canvas {
            width: 100% !important;
            height: 100% !important;
            display: block;
        }
        
        .chart-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
            z-index: 10;
        }
        
        .download-btn {
            background: #1f77b4;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: background 0.2s ease;
        }
        
        .download-btn:hover {
            background: #1565c0;
        }
        
        .chart-explanation {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #e9ecef;
        }
        
        .chart-explanation h4 {
            color: #1f77b4;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .explanation-text {
            color: #555;
            line-height: 1.6;
            margin-bottom: 15px;
            font-size: 0.95rem;
        }
        
        .data-info {
            color: #666;
            font-size: 0.85rem;
            line-height: 1.4;
        }
        
        .data-info strong {
            color: #1f77b4;
        }
        
        /* Large Desktop Layout: Side-by-side charts and explanations */
        @media (min-width: 1200px) {
            .chart-content {
                flex-direction: row;
                align-items: stretch;
            }
            
            .chart-wrapper {
                flex: 1;
                min-height: 400px;
            }
            
            .chart-explanation {
                flex: 0 0 350px;
                border-top: none;
                border-left: 1px solid #e9ecef;
            }
        }
        
        /* Tablet Layout: Side-by-side with smaller explanation panel */
        @media (min-width: 768px) and (max-width: 1199px) {
            .chart-content {
                flex-direction: row;
                align-items: stretch;
            }
            
            .chart-wrapper {
                flex: 1;
                min-height: 350px;
            }
            
            .chart-explanation {
                flex: 0 0 300px;
                border-top: none;
                border-left: 1px solid #e9ecef;
            }
            
            .explanation-text {
                font-size: 0.9rem;
            }
        }
        
        /* Mobile Layout: Explanations below charts */
        @media (max-width: 767px) {
            .chart-container {
                margin-top: 15px;
            }
            
            .chart-wrapper {
                padding: 15px;
                min-height: 250px;
            }
            
            .chart-explanation {
                padding: 15px;
            }
            
            .chart-explanation h4 {
                font-size: 1rem;
            }
            
            .explanation-text {
                font-size: 0.9rem;
            }
            
            .data-info {
                font-size: 0.8rem;
            }
            
            .download-btn {
                padding: 4px 8px;
                font-size: 0.7rem;
            }
            
            .wb-country-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .indicators-grid {
                grid-template-columns: 1fr;
            }
            
            .wb-indicator-group {
                padding: 15px;
            }
            
            .wb-indicator-group h3 {
                font-size: 1rem;
            }
        }
        
        /* Chart loading states */
        .chart-loading {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 200px;
            color: #666;
            font-style: italic;
        }
        
        .chart-error {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 200px;
            color: #e74c3c;
            font-style: italic;
        }
        
        /* Animation for auto-loading charts */
        .chart-container.loading {
            opacity: 0.7;
        }
        
        .chart-container.loaded {
            opacity: 1;
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .refresh-btn {
            background: linear-gradient(135deg, #1f77b4, #2980b9);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 30px auto;
            box-shadow: 0 4px 15px rgba(31, 119, 180, 0.3);
        }
        
        .refresh-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(31, 119, 180, 0.4);
        }
        
        .refresh-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background-color: white;
            margin: 2% auto;
            padding: 20px;
            border-radius: 15px;
            width: 90%;
            max-width: 1200px;
            height: 85%;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            position: relative;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        
        .modal-title {
            color: #1f77b4;
            font-size: 1.5rem;
            font-weight: bold;
            margin: 0;
        }
        
        .close-btn {
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s ease;
        }
        
        .close-btn:hover {
            background: #c0392b;
        }
        
        .time-range-buttons {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .time-btn {
            background: #f8f9fa;
            border: 2px solid #1f77b4;
            color: #1f77b4;
            padding: 8px 16px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }
        
        .time-btn:hover {
            background: #e3f2fd;
        }
        
        .time-btn.active {
            background: #1f77b4;
            color: white;
        }
        
        .modal-chart-container {
            position: relative;
            height: 500px;
            width: 100%;
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .modal-chart-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #666;
            font-size: 1.1rem;
        }
        
        .modal-explanation {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #1f77b4;
            margin-top: 20px;
        }
        
        /* View All Countries Button */
        .view-all-btn {
            background: linear-gradient(135deg, #1f77b4, #2980b9);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            margin-left: 15px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(31, 119, 180, 0.3);
        }
        
        .view-all-btn:hover {
            background: linear-gradient(135deg, #2980b9, #3498db);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(31, 119, 180, 0.4);
        }
        
        .view-all-btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 8px rgba(31, 119, 180, 0.3);
        }
        
        @media (max-width: 768px) {
            /* Mobile-First Complete Redesign */
            body {
                font-size: 14px;
                line-height: 1.4;
                background: #f8f9fa;
            }
            
            .container { 
                padding: 0; 
                max-width: 100%; 
                margin: 0;
            }
            
            /* Mobile Header */
            header {
                padding: 15px;
                text-align: center;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                position: sticky;
                top: 0;
                z-index: 100;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            }
            
            h1 {
                font-size: 1.5rem;
                margin: 0;
                font-weight: 700;
            }
            
            .last-updated {
                font-size: 0.7rem;
                margin-top: 5px;
                opacity: 0.9;
            }
            
            /* Mobile Card-Based Layout */
            .wb-section {
                margin: 0;
                background: white;
                border-radius: 0;
                box-shadow: none;
            }
            
            .wb-indicator-group {
                background: white;
                margin: 0;
                border-radius: 0;
                border-bottom: 8px solid #f8f9fa;
            }
            
            .wb-indicator-group h3 {
                background: #f8f9fa;
                margin: 0;
                padding: 15px;
                font-size: 1.1rem;
                font-weight: 600;
                border-bottom: none;
                color: #495057;
                position: sticky;
                top: 80px;
                z-index: 50;
            }
            
            /* Mobile Single Column Layout */
            .wb-indicators { 
                display: block;
                padding: 0;
                gap: 0;
            }
            
            /* Mobile Card Design */
            .wb-indicator { 
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 18px 15px;
                border-bottom: 1px solid #eee;
                background: white;
                transition: all 0.2s ease;
                min-height: 70px;
                cursor: pointer;
            }
            
            .wb-indicator:last-child {
                border-bottom: none;
            }
            
            .wb-indicator:hover {
                background-color: #f8f9fa;
            }
            
            .wb-indicator:active {
                background-color: #e9ecef;
                transform: scale(0.98);
            }
            
            /* Mobile Content Layout */
            .wb-indicator > div:first-child {
                flex: 1;
                min-width: 0;
                margin-right: 15px;
            }
            
            .indicator-name { 
                font-size: 0.95rem; 
                font-weight: 600;
                color: #212529;
                margin-bottom: 4px;
                line-height: 1.3;
            }
            
            .indicator-date {
                font-size: 0.75rem;
                color: #6c757d;
                font-weight: 400;
            }
            
            .indicator-value { 
                font-size: 1.2rem; 
                font-weight: 700;
                text-align: right;
                min-width: 90px;
                line-height: 1.2;
            }
            
            /* Hide desktop elements on mobile */
            .cache-status {
                display: none !important;
            }
            
            /* Mobile Action Button */
            .view-all-btn {
                display: block;
                width: 100%;
                font-size: 0.95rem;
                font-weight: 600;
                padding: 15px;
                margin: 0;
                border: none;
                background: #007bff;
                color: white;
                border-radius: 0;
                text-align: center;
                transition: background-color 0.2s;
            }
            
            .view-all-btn:hover {
                background: #0056b3;
            }
            
            .view-all-btn:active {
                background: #004085;
                transform: none;
            }
            
            /* Mobile Modal Redesign */
            .modal-content {
                width: 100%;
                height: 100vh;
                margin: 0;
                padding: 0;
                border-radius: 0;
                display: flex;
                flex-direction: column;
                background: white;
            }
            
            .modal-header {
                padding: 15px;
                border-bottom: 1px solid #dee2e6;
                flex-shrink: 0;
                background: #f8f9fa;
                position: relative;
            }
            
            .modal-title {
                font-size: 1.1rem;
                font-weight: 600;
                margin: 0;
                padding-right: 40px;
            }
            
            .close {
                position: absolute;
                right: 15px;
                top: 50%;
                transform: translateY(-50%);
                font-size: 1.5rem;
                padding: 5px 10px;
                color: #6c757d;
                background: none;
                border: none;
                cursor: pointer;
            }
            
            .modal-body {
                flex: 1;
                overflow-y: auto;
                padding: 20px 15px;
                -webkit-overflow-scrolling: touch;
            }
            
            /* Mobile Chart Container */
            .chart-wrapper, .modal-chart-container {
                height: 280px;
                margin: 15px 0;
                background: #fafafa;
                border-radius: 8px;
                border: 1px solid #eee;
            }
            
            /* Mobile Time Range Buttons */
            .time-range-buttons {
                display: flex;
                justify-content: center;
                margin: 20px 0;
                gap: 8px;
                flex-wrap: wrap;
            }
            
            .time-btn {
                flex: 1;
                min-width: 60px;
                max-width: 80px;
                padding: 12px 8px;
                font-size: 0.85rem;
                font-weight: 600;
                border-radius: 20px;
                border: 2px solid #dee2e6;
                background: white;
                color: #495057;
                transition: all 0.2s;
            }
            
            .time-btn.active {
                background: #007bff;
                color: white;
                border-color: #007bff;
            }
            
            .time-btn:hover {
                border-color: #007bff;
                color: #007bff;
            }
            
            /* Mobile Refresh Button */
            #refreshBtn {
                width: calc(100% - 30px);
                margin: 15px;
                padding: 15px;
                font-size: 1rem;
                font-weight: 600;
                border-radius: 25px;
                border: none;
                background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
                color: white;
                box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
                transition: all 0.2s;
            }
            
            #refreshBtn:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 16px rgba(40, 167, 69, 0.4);
            }
            
            #refreshBtn:active {
                transform: translateY(0);
            }
            
            /* Mobile Loading States */
            .mobile-load { 
                color: #6c757d; 
                font-size: 0.9rem; 
                font-style: italic;
            }
            
            .loading {
                color: #6c757d;
                font-size: 0.9rem;
            }
            
            /* Mobile Error States */
            .error-message {
                background: #f8d7da;
                color: #721c24;
                padding: 15px;
                margin: 15px;
                border-radius: 8px;
                text-align: center;
                font-size: 0.9rem;
            }
            
            /* Mobile Chart Loading */
            .chart-loading {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                height: 200px;
                color: #6c757d;
                font-size: 1rem;
                text-align: center;
            }
            
            /* Mobile Performance Optimizations */
            * {
                -webkit-tap-highlight-color: rgba(0,0,0,0);
            }
            
            .wb-section {
                -webkit-overflow-scrolling: touch;
            }
            
            /* Mobile Typography */
            .modal-explanation {
                font-size: 0.9rem;
                line-height: 1.5;
                color: #495057;
                margin: 15px 0;
                padding: 15px;
                background: #f8f9fa;
                border-radius: 8px;
            }
            
            /* Mobile Data Info */
            .modal-data-info {
                font-size: 0.8rem;
                color: #6c757d;
                text-align: center;
                margin: 10px 0;
                padding: 10px;
                background: #f8f9fa;
                border-radius: 6px;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>🌍 Global Economic Indicators Dashboard 2025</h1>
            <div class="subtitle">Real-time global economic data from World Bank Open Data</div>
            <div class="last-updated">Last updated: <span id="currentTime">Loading...</span></div>
        </header>

        <!-- World Bank Economic Data Section -->
        <div class="world-bank-section">
            
            <!-- World Bank GDP Data -->
            <div class="category world-bank-gdp">
                <h2>📈 Global GDP Indicators <span class="wb-logo" style="background: #1f77b4; color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.7rem; font-weight: bold;">WORLD BANK</span></h2>
                <div class="wb-country-grid">
                    <div class="wb-indicator-group">
                        <h3>GDP (Nominal) - Current US$
                            <button class="view-all-btn" onclick="showAllCountriesChart('NY.GDP.MKTP.CD', 'GDP (Nominal)')">📊 View All Countries</button>
                        </h3>
                        <div class="wb-indicators">
                            <div class="indicator wb-indicator" onclick="showWBDetails('US', 'NY.GDP.MKTP.CD', 'GDP (Nominal)')">
                                <div class="cache-status cache-loading" id="wb-US-NY.GDP.MKTP.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇺🇸 United States</div>
                                    <div class="indicator-date" id="wb-US-NY.GDP.MKTP.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-US-NY.GDP.MKTP.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('CN', 'NY.GDP.MKTP.CD', 'GDP (Nominal)')">
                                <div class="cache-status cache-loading" id="wb-CN-NY.GDP.MKTP.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇨🇳 China</div>
                                    <div class="indicator-date" id="wb-CN-NY.GDP.MKTP.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-CN-NY.GDP.MKTP.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('JP', 'NY.GDP.MKTP.CD', 'GDP (Nominal)')">
                                <div class="cache-status cache-loading" id="wb-JP-NY.GDP.MKTP.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇯🇵 Japan</div>
                                    <div class="indicator-date" id="wb-JP-NY.GDP.MKTP.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-JP-NY.GDP.MKTP.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('DE', 'NY.GDP.MKTP.CD', 'GDP (Nominal)')">
                                <div class="cache-status cache-loading" id="wb-DE-NY.GDP.MKTP.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇩🇪 Germany</div>
                                    <div class="indicator-date" id="wb-DE-NY.GDP.MKTP.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-DE-NY.GDP.MKTP.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('KR', 'NY.GDP.MKTP.CD', 'GDP (Nominal)')">
                                <div class="cache-status cache-loading" id="wb-KR-NY.GDP.MKTP.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇰🇷 South Korea</div>
                                    <div class="indicator-date" id="wb-KR-NY.GDP.MKTP.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-KR-NY.GDP.MKTP.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('IN', 'NY.GDP.MKTP.CD', 'GDP (Nominal)')">
                                <div class="cache-status cache-loading" id="wb-IN-NY.GDP.MKTP.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇮🇳 India</div>
                                    <div class="indicator-date" id="wb-IN-NY.GDP.MKTP.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-IN-NY.GDP.MKTP.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('GB', 'NY.GDP.MKTP.CD', 'GDP (Nominal)')">
                                <div class="cache-status cache-loading" id="wb-GB-NY.GDP.MKTP.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇬🇧 United Kingdom</div>
                                    <div class="indicator-date" id="wb-GB-NY.GDP.MKTP.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-GB-NY.GDP.MKTP.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('FR', 'NY.GDP.MKTP.CD', 'GDP (Nominal)')">
                                <div class="cache-status cache-loading" id="wb-FR-NY.GDP.MKTP.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇫🇷 France</div>
                                    <div class="indicator-date" id="wb-FR-NY.GDP.MKTP.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-FR-NY.GDP.MKTP.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('IT', 'NY.GDP.MKTP.CD', 'GDP (Nominal)')">
                                <div class="cache-status cache-loading" id="wb-IT-NY.GDP.MKTP.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇮🇹 Italy</div>
                                    <div class="indicator-date" id="wb-IT-NY.GDP.MKTP.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-IT-NY.GDP.MKTP.CD">Loading...</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="wb-indicator-group">
                        <h3>GDP Growth Rate - Annual %
                            <button class="view-all-btn" onclick="showAllCountriesChart('NY.GDP.MKTP.KD.ZG', 'GDP Growth Rate')">📊 View All Countries</button>
                        </h3>
                        <div class="wb-indicators">
                            <div class="indicator wb-indicator" onclick="showWBDetails('US', 'NY.GDP.MKTP.KD.ZG', 'GDP Growth Rate')">
                                <div class="cache-status cache-loading" id="wb-US-NY.GDP.MKTP.KD.ZG-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇺🇸 United States</div>
                                    <div class="indicator-date" id="wb-US-NY.GDP.MKTP.KD.ZG-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-US-NY.GDP.MKTP.KD.ZG">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('CN', 'NY.GDP.MKTP.KD.ZG', 'GDP Growth Rate')">
                                <div class="cache-status cache-loading" id="wb-CN-NY.GDP.MKTP.KD.ZG-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇨🇳 China</div>
                                    <div class="indicator-date" id="wb-CN-NY.GDP.MKTP.KD.ZG-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-CN-NY.GDP.MKTP.KD.ZG">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('JP', 'NY.GDP.MKTP.KD.ZG', 'GDP Growth Rate')">
                                <div class="cache-status cache-loading" id="wb-JP-NY.GDP.MKTP.KD.ZG-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇯🇵 Japan</div>
                                    <div class="indicator-date" id="wb-JP-NY.GDP.MKTP.KD.ZG-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-JP-NY.GDP.MKTP.KD.ZG">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('DE', 'NY.GDP.MKTP.KD.ZG', 'GDP Growth Rate')">
                                <div class="cache-status cache-loading" id="wb-DE-NY.GDP.MKTP.KD.ZG-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇩🇪 Germany</div>
                                    <div class="indicator-date" id="wb-DE-NY.GDP.MKTP.KD.ZG-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-DE-NY.GDP.MKTP.KD.ZG">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('KR', 'NY.GDP.MKTP.KD.ZG', 'GDP Growth Rate')">
                                <div class="cache-status cache-loading" id="wb-KR-NY.GDP.MKTP.KD.ZG-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇰🇷 South Korea</div>
                                    <div class="indicator-date" id="wb-KR-NY.GDP.MKTP.KD.ZG-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-KR-NY.GDP.MKTP.KD.ZG">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('IN', 'NY.GDP.MKTP.KD.ZG', 'GDP Growth Rate')">
                                <div class="cache-status cache-loading" id="wb-IN-NY.GDP.MKTP.KD.ZG-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇮🇳 India</div>
                                    <div class="indicator-date" id="wb-IN-NY.GDP.MKTP.KD.ZG-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-IN-NY.GDP.MKTP.KD.ZG">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('GB', 'NY.GDP.MKTP.KD.ZG', 'GDP Growth Rate')">
                                <div class="cache-status cache-loading" id="wb-GB-NY.GDP.MKTP.KD.ZG-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇬🇧 United Kingdom</div>
                                    <div class="indicator-date" id="wb-GB-NY.GDP.MKTP.KD.ZG-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-GB-NY.GDP.MKTP.KD.ZG">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('FR', 'NY.GDP.MKTP.KD.ZG', 'GDP Growth Rate')">
                                <div class="cache-status cache-loading" id="wb-FR-NY.GDP.MKTP.KD.ZG-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇫🇷 France</div>
                                    <div class="indicator-date" id="wb-FR-NY.GDP.MKTP.KD.ZG-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-FR-NY.GDP.MKTP.KD.ZG">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('IT', 'NY.GDP.MKTP.KD.ZG', 'GDP Growth Rate')">
                                <div class="cache-status cache-loading" id="wb-IT-NY.GDP.MKTP.KD.ZG-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇮🇹 Italy</div>
                                    <div class="indicator-date" id="wb-IT-NY.GDP.MKTP.KD.ZG-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-IT-NY.GDP.MKTP.KD.ZG">Loading...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- World Bank Trade Data -->
            <div class="category world-bank-trade">
                <h2>🚀 Global Trade Indicators <span class="wb-logo" style="background: #1f77b4; color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.7rem; font-weight: bold;">WORLD BANK</span></h2>
                <div class="wb-country-grid">
                    <div class="wb-indicator-group">
                        <h3>Exports - Current US$
                            <button class="view-all-btn" onclick="showAllCountriesChart('NE.EXP.GNFS.CD', 'Exports')">📊 View All Countries</button>
                        </h3>
                        <div class="wb-indicators">
                            <div class="indicator wb-indicator" onclick="showWBDetails('US', 'NE.EXP.GNFS.CD', 'Exports')">
                                <div class="cache-status cache-loading" id="wb-US-NE.EXP.GNFS.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇺🇸 United States</div>
                                    <div class="indicator-date" id="wb-US-NE.EXP.GNFS.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-US-NE.EXP.GNFS.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('CN', 'NE.EXP.GNFS.CD', 'Exports')">
                                <div class="cache-status cache-loading" id="wb-CN-NE.EXP.GNFS.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇨🇳 China</div>
                                    <div class="indicator-date" id="wb-CN-NE.EXP.GNFS.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-CN-NE.EXP.GNFS.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('DE', 'NE.EXP.GNFS.CD', 'Exports')">
                                <div class="cache-status cache-loading" id="wb-DE-NE.EXP.GNFS.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇩🇪 Germany</div>
                                    <div class="indicator-date" id="wb-DE-NE.EXP.GNFS.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-DE-NE.EXP.GNFS.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('JP', 'NE.EXP.GNFS.CD', 'Exports')">
                                <div class="cache-status cache-loading" id="wb-JP-NE.EXP.GNFS.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇯🇵 Japan</div>
                                    <div class="indicator-date" id="wb-JP-NE.EXP.GNFS.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-JP-NE.EXP.GNFS.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('GB', 'NE.EXP.GNFS.CD', 'Exports')">
                                <div class="cache-status cache-loading" id="wb-GB-NE.EXP.GNFS.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇬🇧 United Kingdom</div>
                                    <div class="indicator-date" id="wb-GB-NE.EXP.GNFS.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-GB-NE.EXP.GNFS.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('FR', 'NE.EXP.GNFS.CD', 'Exports')">
                                <div class="cache-status cache-loading" id="wb-FR-NE.EXP.GNFS.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇫🇷 France</div>
                                    <div class="indicator-date" id="wb-FR-NE.EXP.GNFS.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-FR-NE.EXP.GNFS.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('IT', 'NE.EXP.GNFS.CD', 'Exports')">
                                <div class="cache-status cache-loading" id="wb-IT-NE.EXP.GNFS.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇮🇹 Italy</div>
                                    <div class="indicator-date" id="wb-IT-NE.EXP.GNFS.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-IT-NE.EXP.GNFS.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('CA', 'NE.EXP.GNFS.CD', 'Exports')">
                                <div class="cache-status cache-loading" id="wb-CA-NE.EXP.GNFS.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇨🇦 Canada</div>
                                    <div class="indicator-date" id="wb-CA-NE.EXP.GNFS.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-CA-NE.EXP.GNFS.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('KR', 'NE.EXP.GNFS.CD', 'Exports')">
                                <div class="cache-status cache-loading" id="wb-KR-NE.EXP.GNFS.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇰🇷 South Korea</div>
                                    <div class="indicator-date" id="wb-KR-NE.EXP.GNFS.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-KR-NE.EXP.GNFS.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('IN', 'NE.EXP.GNFS.CD', 'Exports')">
                                <div class="cache-status cache-loading" id="wb-IN-NE.EXP.GNFS.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇮🇳 India</div>
                                    <div class="indicator-date" id="wb-IN-NE.EXP.GNFS.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-IN-NE.EXP.GNFS.CD">Loading...</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="wb-indicator-group">
                        <h3>Imports - Current US$
                            <button class="view-all-btn" onclick="showAllCountriesChart('NE.IMP.GNFS.CD', 'Imports')">📊 View All Countries</button>
                        </h3>
                        <div class="wb-indicators">
                            <div class="indicator wb-indicator" onclick="showWBDetails('US', 'NE.IMP.GNFS.CD', 'Imports')">
                                <div class="cache-status cache-loading" id="wb-US-NE.IMP.GNFS.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇺🇸 United States</div>
                                    <div class="indicator-date" id="wb-US-NE.IMP.GNFS.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-US-NE.IMP.GNFS.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('CN', 'NE.IMP.GNFS.CD', 'Imports')">
                                <div class="cache-status cache-loading" id="wb-CN-NE.IMP.GNFS.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇨🇳 China</div>
                                    <div class="indicator-date" id="wb-CN-NE.IMP.GNFS.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-CN-NE.IMP.GNFS.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('DE', 'NE.IMP.GNFS.CD', 'Imports')">
                                <div class="cache-status cache-loading" id="wb-DE-NE.IMP.GNFS.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇩🇪 Germany</div>
                                    <div class="indicator-date" id="wb-DE-NE.IMP.GNFS.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-DE-NE.IMP.GNFS.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('JP', 'NE.IMP.GNFS.CD', 'Imports')">
                                <div class="cache-status cache-loading" id="wb-JP-NE.IMP.GNFS.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇯🇵 Japan</div>
                                    <div class="indicator-date" id="wb-JP-NE.IMP.GNFS.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-JP-NE.IMP.GNFS.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('GB', 'NE.IMP.GNFS.CD', 'Imports')">
                                <div class="cache-status cache-loading" id="wb-GB-NE.IMP.GNFS.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇬🇧 United Kingdom</div>
                                    <div class="indicator-date" id="wb-GB-NE.IMP.GNFS.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-GB-NE.IMP.GNFS.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('FR', 'NE.IMP.GNFS.CD', 'Imports')">
                                <div class="cache-status cache-loading" id="wb-FR-NE.IMP.GNFS.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇫🇷 France</div>
                                    <div class="indicator-date" id="wb-FR-NE.IMP.GNFS.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-FR-NE.IMP.GNFS.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('IT', 'NE.IMP.GNFS.CD', 'Imports')">
                                <div class="cache-status cache-loading" id="wb-IT-NE.IMP.GNFS.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇮🇹 Italy</div>
                                    <div class="indicator-date" id="wb-IT-NE.IMP.GNFS.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-IT-NE.IMP.GNFS.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('CA', 'NE.IMP.GNFS.CD', 'Imports')">
                                <div class="cache-status cache-loading" id="wb-CA-NE.IMP.GNFS.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇨🇦 Canada</div>
                                    <div class="indicator-date" id="wb-CA-NE.IMP.GNFS.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-CA-NE.IMP.GNFS.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('KR', 'NE.IMP.GNFS.CD', 'Imports')">
                                <div class="cache-status cache-loading" id="wb-KR-NE.IMP.GNFS.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇰🇷 South Korea</div>
                                    <div class="indicator-date" id="wb-KR-NE.IMP.GNFS.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-KR-NE.IMP.GNFS.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('IN', 'NE.IMP.GNFS.CD', 'Imports')">
                                <div class="cache-status cache-loading" id="wb-IN-NE.IMP.GNFS.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇮🇳 India</div>
                                    <div class="indicator-date" id="wb-IN-NE.IMP.GNFS.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-IN-NE.IMP.GNFS.CD">Loading...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- World Bank Investment Data -->
            <div class="category world-bank-investment">
                <h2>💼 Global Investment Indicators <span class="wb-logo" style="background: #1f77b4; color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.7rem; font-weight: bold;">WORLD BANK</span></h2>
                <div class="wb-country-grid">
                    <div class="wb-indicator-group">
                        <h3>Foreign Direct Investment - Current US$
                            <button class="view-all-btn" onclick="showAllCountriesChart('BX.KLT.DINV.CD.WD', 'FDI Inflows')">📊 View All Countries</button>
                        </h3>
                        <div class="wb-indicators">
                            <div class="indicator wb-indicator" onclick="showWBDetails('US', 'BX.KLT.DINV.CD.WD', 'FDI Inflows')">
                                <div class="cache-status cache-loading" id="wb-US-BX.KLT.DINV.CD.WD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇺🇸 United States</div>
                                    <div class="indicator-date" id="wb-US-BX.KLT.DINV.CD.WD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-US-BX.KLT.DINV.CD.WD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('CN', 'BX.KLT.DINV.CD.WD', 'FDI Inflows')">
                                <div class="cache-status cache-loading" id="wb-CN-BX.KLT.DINV.CD.WD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇨🇳 China</div>
                                    <div class="indicator-date" id="wb-CN-BX.KLT.DINV.CD.WD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-CN-BX.KLT.DINV.CD.WD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('JP', 'BX.KLT.DINV.CD.WD', 'FDI Inflows')">
                                <div class="cache-status cache-loading" id="wb-JP-BX.KLT.DINV.CD.WD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇯🇵 Japan</div>
                                    <div class="indicator-date" id="wb-JP-BX.KLT.DINV.CD.WD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-JP-BX.KLT.DINV.CD.WD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('DE', 'BX.KLT.DINV.CD.WD', 'FDI Inflows')">
                                <div class="cache-status cache-loading" id="wb-DE-BX.KLT.DINV.CD.WD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇩🇪 Germany</div>
                                    <div class="indicator-date" id="wb-DE-BX.KLT.DINV.CD.WD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-DE-BX.KLT.DINV.CD.WD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('KR', 'BX.KLT.DINV.CD.WD', 'FDI Inflows')">
                                <div class="cache-status cache-loading" id="wb-KR-BX.KLT.DINV.CD.WD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇰🇷 South Korea</div>
                                    <div class="indicator-date" id="wb-KR-BX.KLT.DINV.CD.WD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-KR-BX.KLT.DINV.CD.WD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('IN', 'BX.KLT.DINV.CD.WD', 'FDI Inflows')">
                                <div class="cache-status cache-loading" id="wb-IN-BX.KLT.DINV.CD.WD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇮🇳 India</div>
                                    <div class="indicator-date" id="wb-IN-BX.KLT.DINV.CD.WD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-IN-BX.KLT.DINV.CD.WD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('GB', 'BX.KLT.DINV.CD.WD', 'FDI Inflows')">
                                <div class="cache-status cache-loading" id="wb-GB-BX.KLT.DINV.CD.WD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇬🇧 United Kingdom</div>
                                    <div class="indicator-date" id="wb-GB-BX.KLT.DINV.CD.WD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-GB-BX.KLT.DINV.CD.WD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('FR', 'BX.KLT.DINV.CD.WD', 'FDI Inflows')">
                                <div class="cache-status cache-loading" id="wb-FR-BX.KLT.DINV.CD.WD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇫🇷 France</div>
                                    <div class="indicator-date" id="wb-FR-BX.KLT.DINV.CD.WD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-FR-BX.KLT.DINV.CD.WD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('IT', 'BX.KLT.DINV.CD.WD', 'FDI Inflows')">
                                <div class="cache-status cache-loading" id="wb-IT-BX.KLT.DINV.CD.WD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇮🇹 Italy</div>
                                    <div class="indicator-date" id="wb-IT-BX.KLT.DINV.CD.WD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-IT-BX.KLT.DINV.CD.WD">Loading...</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="wb-indicator-group">
                        <h3>Gross Fixed Capital Formation - Current US$
                            <button class="view-all-btn" onclick="showAllCountriesChart('NE.GDI.FTOT.CD', 'Gross Fixed Capital Formation')">📊 View All Countries</button>
                        </h3>
                        <div class="wb-indicators">
                            <div class="indicator wb-indicator" onclick="showWBDetails('US', 'NE.GDI.FTOT.CD', 'Gross Fixed Capital Formation')">
                                <div class="cache-status cache-loading" id="wb-US-NE.GDI.FTOT.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇺🇸 United States</div>
                                    <div class="indicator-date" id="wb-US-NE.GDI.FTOT.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-US-NE.GDI.FTOT.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('CN', 'NE.GDI.FTOT.CD', 'Gross Fixed Capital Formation')">
                                <div class="cache-status cache-loading" id="wb-CN-NE.GDI.FTOT.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇨🇳 China</div>
                                    <div class="indicator-date" id="wb-CN-NE.GDI.FTOT.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-CN-NE.GDI.FTOT.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('JP', 'NE.GDI.FTOT.CD', 'Gross Fixed Capital Formation')">
                                <div class="cache-status cache-loading" id="wb-JP-NE.GDI.FTOT.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇯🇵 Japan</div>
                                    <div class="indicator-date" id="wb-JP-NE.GDI.FTOT.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-JP-NE.GDI.FTOT.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('DE', 'NE.GDI.FTOT.CD', 'Gross Fixed Capital Formation')">
                                <div class="cache-status cache-loading" id="wb-DE-NE.GDI.FTOT.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇩🇪 Germany</div>
                                    <div class="indicator-date" id="wb-DE-NE.GDI.FTOT.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-DE-NE.GDI.FTOT.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('KR', 'NE.GDI.FTOT.CD', 'Gross Fixed Capital Formation')">
                                <div class="cache-status cache-loading" id="wb-KR-NE.GDI.FTOT.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇰🇷 South Korea</div>
                                    <div class="indicator-date" id="wb-KR-NE.GDI.FTOT.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-KR-NE.GDI.FTOT.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('IN', 'NE.GDI.FTOT.CD', 'Gross Fixed Capital Formation')">
                                <div class="cache-status cache-loading" id="wb-IN-NE.GDI.FTOT.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇮🇳 India</div>
                                    <div class="indicator-date" id="wb-IN-NE.GDI.FTOT.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-IN-NE.GDI.FTOT.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('GB', 'NE.GDI.FTOT.CD', 'Gross Fixed Capital Formation')">
                                <div class="cache-status cache-loading" id="wb-GB-NE.GDI.FTOT.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇬🇧 United Kingdom</div>
                                    <div class="indicator-date" id="wb-GB-NE.GDI.FTOT.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-GB-NE.GDI.FTOT.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('FR', 'NE.GDI.FTOT.CD', 'Gross Fixed Capital Formation')">
                                <div class="cache-status cache-loading" id="wb-FR-NE.GDI.FTOT.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇫🇷 France</div>
                                    <div class="indicator-date" id="wb-FR-NE.GDI.FTOT.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-FR-NE.GDI.FTOT.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('IT', 'NE.GDI.FTOT.CD', 'Gross Fixed Capital Formation')">
                                <div class="cache-status cache-loading" id="wb-IT-NE.GDI.FTOT.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇮🇹 Italy</div>
                                    <div class="indicator-date" id="wb-IT-NE.GDI.FTOT.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-IT-NE.GDI.FTOT.CD">Loading...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Additional Economic Indicators -->
            <div class="category world-bank-additional">
                <h2>📊 Additional Economic Indicators <span class="wb-logo" style="background: #1f77b4; color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.7rem; font-weight: bold;">WORLD BANK</span></h2>
                <div class="wb-country-grid">
                    <div class="wb-indicator-group">
                        <h3>Population - Total
                            <button class="view-all-btn" onclick="showAllCountriesChart('SP.POP.TOTL', 'Population')">📊 View All Countries</button>
                        </h3>
                        <div class="wb-indicators">
                            <div class="indicator wb-indicator" onclick="showWBDetails('US', 'SP.POP.TOTL', 'Population')">
                                <div class="cache-status cache-loading" id="wb-US-SP.POP.TOTL-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇺🇸 United States</div>
                                    <div class="indicator-date" id="wb-US-SP.POP.TOTL-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-US-SP.POP.TOTL">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('CN', 'SP.POP.TOTL', 'Population')">
                                <div class="cache-status cache-loading" id="wb-CN-SP.POP.TOTL-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇨🇳 China</div>
                                    <div class="indicator-date" id="wb-CN-SP.POP.TOTL-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-CN-SP.POP.TOTL">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('IN', 'SP.POP.TOTL', 'Population')">
                                <div class="cache-status cache-loading" id="wb-IN-SP.POP.TOTL-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇮🇳 India</div>
                                    <div class="indicator-date" id="wb-IN-SP.POP.TOTL-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-IN-SP.POP.TOTL">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('JP', 'SP.POP.TOTL', 'Population')">
                                <div class="cache-status cache-loading" id="wb-JP-SP.POP.TOTL-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇯🇵 Japan</div>
                                    <div class="indicator-date" id="wb-JP-SP.POP.TOTL-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-JP-SP.POP.TOTL">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('DE', 'SP.POP.TOTL', 'Population')">
                                <div class="cache-status cache-loading" id="wb-DE-SP.POP.TOTL-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇩🇪 Germany</div>
                                    <div class="indicator-date" id="wb-DE-SP.POP.TOTL-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-DE-SP.POP.TOTL">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('KR', 'SP.POP.TOTL', 'Population')">
                                <div class="cache-status cache-loading" id="wb-KR-SP.POP.TOTL-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇰🇷 South Korea</div>
                                    <div class="indicator-date" id="wb-KR-SP.POP.TOTL-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-KR-SP.POP.TOTL">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('GB', 'SP.POP.TOTL', 'Population')">
                                <div class="cache-status cache-loading" id="wb-GB-SP.POP.TOTL-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇬🇧 United Kingdom</div>
                                    <div class="indicator-date" id="wb-GB-SP.POP.TOTL-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-GB-SP.POP.TOTL">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('FR', 'SP.POP.TOTL', 'Population')">
                                <div class="cache-status cache-loading" id="wb-FR-SP.POP.TOTL-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇫🇷 France</div>
                                    <div class="indicator-date" id="wb-FR-SP.POP.TOTL-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-FR-SP.POP.TOTL">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('IT', 'SP.POP.TOTL', 'Population')">
                                <div class="cache-status cache-loading" id="wb-IT-SP.POP.TOTL-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇮🇹 Italy</div>
                                    <div class="indicator-date" id="wb-IT-SP.POP.TOTL-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-IT-SP.POP.TOTL">Loading...</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="wb-indicator-group">
                        <h3>Unemployment Rate - % 
                            <button class="view-all-btn" onclick="showAllCountriesChart('SL.UEM.TOTL.ZS', 'Unemployment Rate')">📊 View All Countries</button>
                        </h3>
                        <div class="wb-indicators">
                            <div class="indicator wb-indicator" onclick="showWBDetails('US', 'SL.UEM.TOTL.ZS', 'Unemployment Rate')">
                                <div class="cache-status cache-loading" id="wb-US-SL.UEM.TOTL.ZS-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇺🇸 United States</div>
                                    <div class="indicator-date" id="wb-US-SL.UEM.TOTL.ZS-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-US-SL.UEM.TOTL.ZS">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('CN', 'SL.UEM.TOTL.ZS', 'Unemployment Rate')">
                                <div class="cache-status cache-loading" id="wb-CN-SL.UEM.TOTL.ZS-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇨🇳 China</div>
                                    <div class="indicator-date" id="wb-CN-SL.UEM.TOTL.ZS-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-CN-SL.UEM.TOTL.ZS">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('JP', 'SL.UEM.TOTL.ZS', 'Unemployment Rate')">
                                <div class="cache-status cache-loading" id="wb-JP-SL.UEM.TOTL.ZS-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇯🇵 Japan</div>
                                    <div class="indicator-date" id="wb-JP-SL.UEM.TOTL.ZS-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-JP-SL.UEM.TOTL.ZS">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('DE', 'SL.UEM.TOTL.ZS', 'Unemployment Rate')">
                                <div class="cache-status cache-loading" id="wb-DE-SL.UEM.TOTL.ZS-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇩🇪 Germany</div>
                                    <div class="indicator-date" id="wb-DE-SL.UEM.TOTL.ZS-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-DE-SL.UEM.TOTL.ZS">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('KR', 'SL.UEM.TOTL.ZS', 'Unemployment Rate')">
                                <div class="cache-status cache-loading" id="wb-KR-SL.UEM.TOTL.ZS-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇰🇷 South Korea</div>
                                    <div class="indicator-date" id="wb-KR-SL.UEM.TOTL.ZS-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-KR-SL.UEM.TOTL.ZS">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('IN', 'SL.UEM.TOTL.ZS', 'Unemployment Rate')">
                                <div class="cache-status cache-loading" id="wb-IN-SL.UEM.TOTL.ZS-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇮🇳 India</div>
                                    <div class="indicator-date" id="wb-IN-SL.UEM.TOTL.ZS-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-IN-SL.UEM.TOTL.ZS">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('GB', 'SL.UEM.TOTL.ZS', 'Unemployment Rate')">
                                <div class="cache-status cache-loading" id="wb-GB-SL.UEM.TOTL.ZS-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇬🇧 United Kingdom</div>
                                    <div class="indicator-date" id="wb-GB-SL.UEM.TOTL.ZS-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-GB-SL.UEM.TOTL.ZS">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('FR', 'SL.UEM.TOTL.ZS', 'Unemployment Rate')">
                                <div class="cache-status cache-loading" id="wb-FR-SL.UEM.TOTL.ZS-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇫🇷 France</div>
                                    <div class="indicator-date" id="wb-FR-SL.UEM.TOTL.ZS-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-FR-SL.UEM.TOTL.ZS">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('IT', 'SL.UEM.TOTL.ZS', 'Unemployment Rate')">
                                <div class="cache-status cache-loading" id="wb-IT-SL.UEM.TOTL.ZS-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇮🇹 Italy</div>
                                    <div class="indicator-date" id="wb-IT-SL.UEM.TOTL.ZS-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-IT-SL.UEM.TOTL.ZS">Loading...</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="wb-indicator-group">
                        <h3>Current Account Balance - US$
                            <button class="view-all-btn" onclick="showAllCountriesChart('BN.CAB.XOKA.CD', 'Current Account Balance')">📊 View All Countries</button>
                        </h3>
                        <div class="wb-indicators">
                            <div class="indicator wb-indicator" onclick="showWBDetails('US', 'BN.CAB.XOKA.CD', 'Current Account Balance')">
                                <div class="cache-status cache-loading" id="wb-US-BN.CAB.XOKA.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇺🇸 United States</div>
                                    <div class="indicator-date" id="wb-US-BN.CAB.XOKA.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-US-BN.CAB.XOKA.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('CN', 'BN.CAB.XOKA.CD', 'Current Account Balance')">
                                <div class="cache-status cache-loading" id="wb-CN-BN.CAB.XOKA.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇨🇳 China</div>
                                    <div class="indicator-date" id="wb-CN-BN.CAB.XOKA.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-CN-BN.CAB.XOKA.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('JP', 'BN.CAB.XOKA.CD', 'Current Account Balance')">
                                <div class="cache-status cache-loading" id="wb-JP-BN.CAB.XOKA.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇯🇵 Japan</div>
                                    <div class="indicator-date" id="wb-JP-BN.CAB.XOKA.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-JP-BN.CAB.XOKA.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('DE', 'BN.CAB.XOKA.CD', 'Current Account Balance')">
                                <div class="cache-status cache-loading" id="wb-DE-BN.CAB.XOKA.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇩🇪 Germany</div>
                                    <div class="indicator-date" id="wb-DE-BN.CAB.XOKA.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-DE-BN.CAB.XOKA.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('KR', 'BN.CAB.XOKA.CD', 'Current Account Balance')">
                                <div class="cache-status cache-loading" id="wb-KR-BN.CAB.XOKA.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇰🇷 South Korea</div>
                                    <div class="indicator-date" id="wb-KR-BN.CAB.XOKA.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-KR-BN.CAB.XOKA.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('IN', 'BN.CAB.XOKA.CD', 'Current Account Balance')">
                                <div class="cache-status cache-loading" id="wb-IN-BN.CAB.XOKA.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇮🇳 India</div>
                                    <div class="indicator-date" id="wb-IN-BN.CAB.XOKA.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-IN-BN.CAB.XOKA.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('GB', 'BN.CAB.XOKA.CD', 'Current Account Balance')">
                                <div class="cache-status cache-loading" id="wb-GB-BN.CAB.XOKA.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇬🇧 United Kingdom</div>
                                    <div class="indicator-date" id="wb-GB-BN.CAB.XOKA.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-GB-BN.CAB.XOKA.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('FR', 'BN.CAB.XOKA.CD', 'Current Account Balance')">
                                <div class="cache-status cache-loading" id="wb-FR-BN.CAB.XOKA.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇫🇷 France</div>
                                    <div class="indicator-date" id="wb-FR-BN.CAB.XOKA.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-FR-BN.CAB.XOKA.CD">Loading...</div>
                            </div>
                            <div class="indicator wb-indicator" onclick="showWBDetails('IT', 'BN.CAB.XOKA.CD', 'Current Account Balance')">
                                <div class="cache-status cache-loading" id="wb-IT-BN.CAB.XOKA.CD-cache">Loading</div>
                                <div>
                                    <div class="indicator-name">🇮🇹 Italy</div>
                                    <div class="indicator-date" id="wb-IT-BN.CAB.XOKA.CD-date">-</div>
                                </div>
                                <div class="indicator-value loading" id="wb-IT-BN.CAB.XOKA.CD">Loading...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <button class="refresh-btn" id="refreshBtn" onclick="loadAllWorldBankData(true)">
            🔄 Refresh Global Economic Data
        </button>
    </div>
    
    <!-- Chart Modal -->
    <div id="chartModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle" class="modal-title">Economic Indicator Chart</h2>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            
            <div class="time-range-buttons">
                <button class="time-btn" onclick="setTimeRange('5')">Last 5 Years</button>
                <button class="time-btn" onclick="setTimeRange('10')">Last 10 Years</button>
                <button class="time-btn" onclick="setTimeRange('20')">Last 20 Years</button>
                <button class="time-btn active" onclick="setTimeRange('all')">All Years</button>
            </div>
            
            <div class="modal-chart-container">
                <div id="modalChartLoading" class="modal-chart-loading">📊 Loading chart data...</div>
                <canvas id="modalChart" style="display: none; width: 100%; height: 100%;"></canvas>
            </div>
            
            <div id="modalExplanation" class="modal-explanation">
                <h3>About this indicator</h3>
                <p id="modalExplanationText">Loading explanation...</p>
                <div id="modalDataInfo">
                    <small><strong>Source:</strong> World Bank Open Data</small>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer with additional SEO content -->
    <footer style="background: #1f77b4; color: white; padding: 30px; margin-top: 40px; border-radius: 15px;">
        <div style="max-width: 1200px; margin: 0 auto;">
            <h2 style="color: #ffffff; margin-bottom: 20px; text-align: center;">🌍 About This Global Economic Dashboard</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px;">
                <div>
                    <h3 style="color: #e3f2fd; font-size: 1.1rem; margin-bottom: 10px;">🎯 Data Sources</h3>
                    <p style="font-size: 0.9rem; line-height: 1.5;">All economic data sourced directly from the World Bank Open Data platform, covering GDP, trade, and investment indicators for major global economies.</p>
                </div>
                <div>
                    <h3 style="color: #e3f2fd; font-size: 1.1rem; margin-bottom: 10px;">⏰ Update Frequency</h3>
                    <p style="font-size: 0.9rem; line-height: 1.5;">Data is updated annually based on World Bank release schedules. Historical data spans from 2000 to the most recent available year.</p>
                </div>
                <div>
                    <h3 style="color: #e3f2fd; font-size: 1.1rem; margin-bottom: 10px;">💡 Usage Tips</h3>
                    <p style="font-size: 0.9rem; line-height: 1.5;">Click any indicator for detailed historical charts. Compare economic performance across countries. Download data in CSV/Excel format for analysis.</p>
                </div>
            </div>
            <div style="text-align: center; border-top: 1px solid #2980b9; padding-top: 20px; font-size: 0.8rem; color: #e3f2fd;">
                <p>© 2025 Global Economic Dashboard | Free Economic Data from World Bank Open Data | Educational and Research Use</p>
                <p>Keywords: World Bank data, global economic indicators, GDP growth, trade data, FDI inflows, economic analysis, global dashboard</p>
            </div>
        </div>
    </footer>
    
    <script>
        // World Bank API Integration
        const WORLD_BANK_INDICATORS = {
            // 📊 GDP (Gross Domestic Product) - Complete Set
            'NY.GDP.MKTP.CD': { name: 'GDP (Nominal, current US$)', nameEng: 'GDP (current US$)', unit: 'Current US$', category: 'GDP' },
            'NY.GDP.MKTP.CN': { name: 'GDP (Nominal, local currency)', nameEng: 'GDP (current LCU)', unit: 'Local Currency', category: 'GDP' },
            'NY.GDP.MKTP.KD': { name: 'GDP (Real, constant US$)', nameEng: 'GDP (constant 2015 US$)', unit: 'Constant 2015 US$', category: 'GDP' },
            'NY.GDP.PCAP.CD': { name: 'GDP per capita (Nominal, US$)', nameEng: 'GDP per capita (current US$)', unit: 'Current US$', category: 'GDP' },
            'NY.GDP.PCAP.KD': { name: 'GDP per capita (Real, constant US$)', nameEng: 'GDP per capita (constant 2015 US$)', unit: 'Constant 2015 US$', category: 'GDP' },
            'NY.GDP.PCAP.PP.CD': { name: 'GDP per capita (PPP, US$)', nameEng: 'GDP per capita, PPP (current international $)', unit: 'PPP US$', category: 'GDP' },
            'NY.GDP.MKTP.KD.ZG': { name: 'GDP Growth Rate (annual %)', nameEng: 'GDP growth (annual %)', unit: '%', category: 'GDP' },
            'NY.GDP.PCAP.KD.ZG': { name: 'GDP per capita Growth Rate (%)', nameEng: 'GDP per capita growth (annual %)', unit: '%', category: 'GDP' },
            
            // 📊 GNP (Gross National Product) - Complete Set  
            'NY.GNP.MKTP.CD': { name: 'GNP (Nominal, current US$)', nameEng: 'GNI (current US$)', unit: 'Current US$', category: 'GNP' },
            'NY.GNP.MKTP.KD': { name: 'GNP (Real, constant US$)', nameEng: 'GNI (constant 2015 US$)', unit: 'Constant 2015 US$', category: 'GNP' },
            'NY.GNP.PCAP.CD': { name: 'GNP per capita (Nominal, US$)', nameEng: 'GNI per capita (current US$)', unit: 'Current US$', category: 'GNP' },
            'NY.GNP.PCAP.KD': { name: 'GNP per capita (Real, constant US$)', nameEng: 'GNI per capita (constant 2015 US$)', unit: 'Constant 2015 US$', category: 'GNP' },
            'NY.GNP.PCAP.PP.CD': { name: 'GNP per capita (PPP, US$)', nameEng: 'GNI per capita, PPP (current international $)', unit: 'PPP US$', category: 'GNP' },
            'NY.GNP.MKTP.PP.CD': { name: 'GNP (PPP, US$)', nameEng: 'GNI, PPP (current international $)', unit: 'PPP US$', category: 'GNP' },
            
            // 📊 Gross Investment (Gross Capital Formation) - Complete Set
            'NE.GDI.TOTL.ZS': { name: 'Gross Investment (% of GDP)', nameEng: 'Gross capital formation (% of GDP)', unit: '% of GDP', category: 'Investment' },
            'NE.GDI.TOTL.CD': { name: 'Gross Investment (current US$)', nameEng: 'Gross capital formation (current US$)', unit: 'Current US$', category: 'Investment' },
            'NE.GDI.FTOT.ZS': { name: 'Gross Fixed Investment (% of GDP)', nameEng: 'Gross fixed capital formation (% of GDP)', unit: '% of GDP', category: 'Investment' },
            'NE.GDI.FPRV.ZS': { name: 'Private Investment (% of GDP)', nameEng: 'Gross fixed capital formation, private sector (% of GDP)', unit: '% of GDP', category: 'Investment' },
            'NE.GDI.FGOV.ZS': { name: 'Government Investment (% of GDP)', nameEng: 'Gross fixed capital formation, public sector (% of GDP)', unit: '% of GDP', category: 'Investment' },
            
            // 📊 Gross Savings - Complete Set
            'NY.GNS.ICTR.ZS': { name: 'Gross Savings (% of GDP)', nameEng: 'Gross savings (% of GDP)', unit: '% of GDP', category: 'Savings' },
            'NY.GNS.ICTR.CD': { name: 'Gross Savings (current US$)', nameEng: 'Gross savings (current US$)', unit: 'Current US$', category: 'Savings' },
            'NY.GNS.GNFS.ZS': { name: 'National Savings (% of GNI)', nameEng: 'Gross national savings (% of GNI)', unit: '% of GNI', category: 'Savings' },
            
            // 📊 Inflation / Price Indices - Complete Set  
            'FP.CPI.TOTL': { name: 'Consumer Price Index (CPI, 2010=100)', nameEng: 'Consumer price index (2010 = 100)', unit: 'Index 2010=100', category: 'Inflation' },
            'FP.CPI.TOTL.ZG': { name: 'Inflation Rate (Consumer Prices, %)', nameEng: 'Inflation, consumer prices (annual %)', unit: '%', category: 'Inflation' },
            'NY.GDP.DEFL.ZS': { name: 'GDP Deflator (annual %)', nameEng: 'GDP deflator (annual %)', unit: '%', category: 'Inflation' },
            'NY.GDP.DEFL.KD.ZG': { name: 'GDP Deflator Change Rate (%)', nameEng: 'GDP deflator growth rate (%)', unit: '%', category: 'Inflation' },
            
            // Trade Indicators
            'NE.EXP.GNFS.CD': { name: 'Exports', nameEng: 'Exports of goods and services (current US$)', unit: 'Current US$', category: 'Trade' },
            'NE.IMP.GNFS.CD': { name: 'Imports', nameEng: 'Imports of goods and services (current US$)', unit: 'Current US$', category: 'Trade' },
            'NE.RSB.GNFS.CD': { name: 'Trade Balance', nameEng: 'External balance on goods and services (current US$)', unit: 'Current US$', category: 'Trade' },
            'TG.VAL.TOTL.GD.ZS': { name: 'Trade (% of GDP)', nameEng: 'Trade (% of GDP)', unit: '% of GDP', category: 'Trade' },
            
            // Investment Indicators
            'BX.KLT.DINV.CD.WD': { name: 'FDI Inflows', nameEng: 'Foreign direct investment, net inflows (current US$)', unit: 'Current US$', category: 'Investment' },
            'NE.GDI.FTOT.CD': { name: 'Gross Fixed Capital Formation', nameEng: 'Gross fixed capital formation (current US$)', unit: 'Current US$', category: 'Investment' },
            'NE.GDI.TOTL.ZS': { name: 'Gross Capital Formation (% of GDP)', nameEng: 'Gross capital formation (% of GDP)', unit: '% of GDP', category: 'Investment' },
            'BX.KLT.DINV.WD.GD.ZS': { name: 'FDI Inflows (% of GDP)', nameEng: 'Foreign direct investment, net inflows (% of GDP)', unit: '% of GDP', category: 'Investment' },
            
            // Additional Economic Indicators
            'SP.POP.TOTL': { name: 'Population', nameEng: 'Population, total', unit: 'People', category: 'Demographics' },
            'NY.GNP.PCAP.CD': { name: 'GNI Per Capita', nameEng: 'GNI per capita (current US$)', unit: 'Current US$', category: 'Income' },
            'SL.UEM.TOTL.ZS': { name: 'Unemployment Rate', nameEng: 'Unemployment, total (% of total labor force)', unit: '% of labor force', category: 'Labor' },
            'FP.CPI.TOTL.ZG': { name: 'Inflation Rate', nameEng: 'Inflation, consumer prices (annual %)', unit: '% annual', category: 'Monetary' },
            'GC.BAL.CASH.GD.ZS': { name: 'Government Balance (% of GDP)', nameEng: 'Cash surplus/deficit (% of GDP)', unit: '% of GDP', category: 'Fiscal' },
            'DT.DOD.DECT.CD': { name: 'External Debt', nameEng: 'External debt stocks, total (current US$)', unit: 'Current US$', category: 'Debt' },
            'BN.CAB.XOKA.CD': { name: 'Current Account Balance', nameEng: 'Current account balance (BoP, current US$)', unit: 'Current US$', category: 'Balance' },
            'NY.GDP.DEFL.ZS': { name: 'GDP Deflator', nameEng: 'GDP deflator (base year varies by country)', unit: 'Index', category: 'Price' },
            
            // 📈 Economic Growth & Productivity - Additional Indicators
            'NY.GNI.PCAP.CD': { name: 'GNI per capita (Atlas method)', nameEng: 'GNI per capita, Atlas method (current US$)', unit: 'Current US$', category: 'Growth' },
            'NY.GDP.PCAP.KD.ZG': { name: 'GDP per capita growth', nameEng: 'GDP per capita growth (annual %)', unit: '%', category: 'Growth' },
            'NY.GNS.ICTR.ZS': { name: 'Gross savings', nameEng: 'Gross savings (% of GDP)', unit: '% of GDP', category: 'Savings' },
            'NV.AGR.TOTL.ZS': { name: 'Agriculture value added', nameEng: 'Agriculture, forestry, and fishing, value added (% of GDP)', unit: '% of GDP', category: 'Productivity' },
            'NV.IND.TOTL.ZS': { name: 'Industry value added', nameEng: 'Industry (including construction), value added (% of GDP)', unit: '% of GDP', category: 'Productivity' },
            'NV.SRV.TOTL.ZS': { name: 'Services value added', nameEng: 'Services, value added (% of GDP)', unit: '% of GDP', category: 'Productivity' },
            
            // 📊 Inflation & Price Indices - Additional Indicators
            'FP.PRI.INDEX': { name: 'Food price index', nameEng: 'Food production index (2014-2016 = 100)', unit: 'Index 2014-2016=100', category: 'Price' },
            'NY.GDP.DEFL.KD.ZG': { name: 'GDP deflator growth', nameEng: 'Inflation, GDP deflator (annual %)', unit: '%', category: 'Inflation' },
            'CPTOTSAXN': { name: 'Core CPI', nameEng: 'Consumer price index, all items less food and energy', unit: 'Index', category: 'Inflation' },
            
            // 🏛️ Fiscal & Government Indicators - Additional Indicators
            'GC.REV.XGRT.GD.ZS': { name: 'Revenue excl. grants', nameEng: 'Revenue, excluding grants (% of GDP)', unit: '% of GDP', category: 'Fiscal' },
            'GC.XPN.TOTL.GD.ZS': { name: 'Total expenditure', nameEng: 'Expense (% of GDP)', unit: '% of GDP', category: 'Fiscal' },
            'GC.TAX.TOTL.GD.ZS': { name: 'Tax revenue', nameEng: 'Tax revenue (% of GDP)', unit: '% of GDP', category: 'Fiscal' },
            'GC.DOD.TOTL.GD.ZS': { name: 'Central government debt', nameEng: 'Central government debt, total (% of GDP)', unit: '% of GDP', category: 'Debt' },
            
            // 🌍 Trade & Balance of Payments - Additional Indicators
            'BN.CAB.XOKA.GD.ZS': { name: 'Current account balance', nameEng: 'Current account balance (% of GDP)', unit: '% of GDP', category: 'Balance' },
            'NE.TRD.GNFS.ZS': { name: 'Trade volume', nameEng: 'Trade (% of GDP)', unit: '% of GDP', category: 'Trade' },
            'NE.EXP.GNFS.ZS': { name: 'Exports', nameEng: 'Exports of goods and services (% of GDP)', unit: '% of GDP', category: 'Trade' },
            'NE.IMP.GNFS.ZS': { name: 'Imports', nameEng: 'Imports of goods and services (% of GDP)', unit: '% of GDP', category: 'Trade' },
            'BX.KLT.DINV.WD.GD.ZS': { name: 'FDI net inflows', nameEng: 'Foreign direct investment, net inflows (% of GDP)', unit: '% of GDP', category: 'Investment' },
            
            // 👥 Labor Markets - Additional Indicators
            'SL.TLF.TOTL.IN': { name: 'Labor force total', nameEng: 'Labor force, total', unit: 'People', category: 'Labor' },
            'SL.AGR.EMPL.ZS': { name: 'Agriculture employment', nameEng: 'Employment in agriculture (% of total employment)', unit: '% of employment', category: 'Labor' },
            'SL.IND.EMPL.ZS': { name: 'Industry employment', nameEng: 'Employment in industry (% of total employment)', unit: '% of employment', category: 'Labor' },
            'SL.SRV.EMPL.ZS': { name: 'Services employment', nameEng: 'Employment in services (% of total employment)', unit: '% of employment', category: 'Labor' },
            'SL.TLF.CACT.ZS': { name: 'Labor force participation', nameEng: 'Labor force participation rate, total (% of total population ages 15+)', unit: '% of population', category: 'Labor' },
            'SL.UEM.1524.ZS': { name: 'Youth unemployment', nameEng: 'Unemployment, youth total (% of total labor force ages 15-24)', unit: '% of youth labor force', category: 'Labor' },
            
            // 📊 Social/Demographics - Additional Indicators
            'SP.DYN.LE00.IN': { name: 'Life expectancy', nameEng: 'Life expectancy at birth, total (years)', unit: 'Years', category: 'Demographics' },
            'SE.ADT.LITR.ZS': { name: 'Literacy rate', nameEng: 'Literacy rate, adult total (% of people ages 15 and above)', unit: '% of adults', category: 'Social' },
            'SH.DYN.MORT': { name: 'Mortality rate', nameEng: 'Mortality rate, under-5 (per 1,000 live births)', unit: 'Per 1,000', category: 'Health' },
            'SP.DYN.TFRT.IN': { name: 'Fertility rate', nameEng: 'Fertility rate, total (births per woman)', unit: 'Births per woman', category: 'Demographics' },
            'SP.URB.TOTL.IN.ZS': { name: 'Urban population', nameEng: 'Urban population (% of total population)', unit: '% of population', category: 'Demographics' },
            'SP.DYN.CBRT.IN': { name: 'Birth rate', nameEng: 'Birth rate, crude (per 1,000 people)', unit: 'Per 1,000', category: 'Demographics' },
            'SP.DYN.CDRT.IN': { name: 'Death rate', nameEng: 'Death rate, crude (per 1,000 people)', unit: 'Per 1,000', category: 'Demographics' },
            
            // 🌱 Environment & Energy - Additional Indicators
            'EN.ATM.CO2E.PC': { name: 'CO2 emissions per capita', nameEng: 'CO2 emissions (metric tons per capita)', unit: 'Metric tons per capita', category: 'Environment' },
            'EG.USE.PCAP.KG.OE': { name: 'Energy use per capita', nameEng: 'Energy use (kg of oil equivalent per capita)', unit: 'kg oil equivalent per capita', category: 'Energy' },
            'AG.LND.FRST.ZS': { name: 'Forest area', nameEng: 'Forest area (% of land area)', unit: '% of land area', category: 'Environment' },
            'EG.ELC.ACCS.ZS': { name: 'Electricity access', nameEng: 'Access to electricity (% of population)', unit: '% of population', category: 'Energy' },
            'EN.ATM.CO2E.KT': { name: 'CO2 emissions total', nameEng: 'CO2 emissions (kt)', unit: 'Kilotons', category: 'Environment' },
            'EG.USE.COMM.GD.PP.KD': { name: 'Energy intensity', nameEng: 'Energy intensity level of primary energy (MJ/$2017 PPP GDP)', unit: 'MJ per $ PPP GDP', category: 'Energy' }
        };
        
        const WORLD_BANK_COUNTRIES = {
            // All OECD Countries (38 members as of 2023)
            'US': { name: 'United States', flag: '🇺🇸' },
            'JP': { name: 'Japan', flag: '🇯🇵' },
            'DE': { name: 'Germany', flag: '🇩🇪' },
            'GB': { name: 'United Kingdom', flag: '🇬🇧' },
            'FR': { name: 'France', flag: '🇫🇷' },
            'IT': { name: 'Italy', flag: '🇮🇹' },
            'CA': { name: 'Canada', flag: '🇨🇦' },
            'KR': { name: 'South Korea', flag: '🇰🇷' },
            'ES': { name: 'Spain', flag: '🇪🇸' },
            'AU': { name: 'Australia', flag: '🇦🇺' },
            'MX': { name: 'Mexico', flag: '🇲🇽' },
            'NL': { name: 'Netherlands', flag: '🇳🇱' },
            'CH': { name: 'Switzerland', flag: '🇨🇭' },
            'BE': { name: 'Belgium', flag: '🇧🇪' },
            'IE': { name: 'Ireland', flag: '🇮🇪' },
            'IL': { name: 'Israel', flag: '🇮🇱' },
            'AT': { name: 'Austria', flag: '🇦🇹' },
            'NO': { name: 'Norway', flag: '🇳🇴' },
            'SE': { name: 'Sweden', flag: '🇸🇪' },
            'PL': { name: 'Poland', flag: '🇵🇱' },
            'DK': { name: 'Denmark', flag: '🇩🇰' },
            'FI': { name: 'Finland', flag: '🇫🇮' },
            'CZ': { name: 'Czech Republic', flag: '🇨🇿' },
            'PT': { name: 'Portugal', flag: '🇵🇹' },
            'NZ': { name: 'New Zealand', flag: '🇳🇿' },
            'GR': { name: 'Greece', flag: '🇬🇷' },
            'HU': { name: 'Hungary', flag: '🇭🇺' },
            'SK': { name: 'Slovakia', flag: '🇸🇰' },
            'LU': { name: 'Luxembourg', flag: '🇱🇺' },
            'IS': { name: 'Iceland', flag: '🇮🇸' },
            'SI': { name: 'Slovenia', flag: '🇸🇮' },
            'EE': { name: 'Estonia', flag: '🇪🇪' },
            'LV': { name: 'Latvia', flag: '🇱🇻' },
            'LT': { name: 'Lithuania', flag: '🇱🇹' },
            'CL': { name: 'Chile', flag: '🇨🇱' },
            'TR': { name: 'Turkey', flag: '🇹🇷' },
            'CO': { name: 'Colombia', flag: '🇨🇴' },
            'CR': { name: 'Costa Rica', flag: '🇨🇷' },
            
            // Major non-OECD economies for comparison
            'CN': { name: 'China', flag: '🇨🇳' },
            'IN': { name: 'India', flag: '🇮🇳' },
            'BR': { name: 'Brazil', flag: '🇧🇷' },
            'RU': { name: 'Russia', flag: '🇷🇺' }
        };
        
        const WB_UPDATE_FREQUENCIES = {
            'NY.GDP.MKTP.CD': { cacheDays: 90, description: 'Annual', realFreq: 'Annual (World Bank)', delay: 'About 6 months delay' },
            'NY.GDP.MKTP.KD': { cacheDays: 90, description: 'Annual', realFreq: 'Annual (World Bank)', delay: 'About 6 months delay' },
            'NY.GDP.PCAP.CD': { cacheDays: 90, description: 'Annual', realFreq: 'Annual (World Bank)', delay: 'About 6 months delay' },
            'NY.GDP.MKTP.KD.ZG': { cacheDays: 90, description: 'Annual', realFreq: 'Annual (World Bank)', delay: 'About 6 months delay' },
            'NE.EXP.GNFS.CD': { cacheDays: 90, description: 'Annual', realFreq: 'Annual (World Bank)', delay: 'About 6 months delay' },
            'NE.IMP.GNFS.CD': { cacheDays: 90, description: 'Annual', realFreq: 'Annual (World Bank)', delay: 'About 6 months delay' },
            'NE.RSB.GNFS.CD': { cacheDays: 90, description: 'Annual', realFreq: 'Annual (World Bank)', delay: 'About 6 months delay' },
            'TG.VAL.TOTL.GD.ZS': { cacheDays: 90, description: 'Annual', realFreq: 'Annual (World Bank)', delay: 'About 6 months delay' },
            'BX.KLT.DINV.CD.WD': { cacheDays: 90, description: 'Annual', realFreq: 'Annual (World Bank)', delay: 'About 6 months delay' },
            'NE.GDI.FTOT.CD': { cacheDays: 90, description: 'Annual', realFreq: 'Annual (World Bank)', delay: 'About 6 months delay' },
            'NE.GDI.TOTL.ZS': { cacheDays: 90, description: 'Annual', realFreq: 'Annual (World Bank)', delay: 'About 6 months delay' },
            'BX.KLT.DINV.WD.GD.ZS': { cacheDays: 90, description: 'Annual', realFreq: 'Annual (World Bank)', delay: 'About 6 months delay' }
        };

        let loadResults = { wbSuccess: 0, wbFailed: 0, wbCached: 0, errors: [] };

        // Clock update function
        function updateClock() {
            const now = new Date();
            const timeString = now.toLocaleString('en-US', {
                year: 'numeric', month: '2-digit', day: '2-digit',
                hour: '2-digit', minute: '2-digit', second: '2-digit'
            });
            document.getElementById('currentTime').textContent = timeString;
        }

        // World Bank API Functions
        async function fetchWorldBankData(countryCode, indicatorCode, isHistorical = false) {
            const isMobileDevice = window.innerWidth <= 768 || /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            try {
                // Mobile-optimized parameters
                const perPage = isHistorical ? (isMobileDevice ? 50 : 200) : 1;
                const currentYear = new Date().getFullYear();
                const dateRange = isMobileDevice ? `2020:${currentYear}` : `1960:${currentYear}`;
                const url = `https://api.worldbank.org/v2/country/${countryCode}/indicator/${indicatorCode}?format=json&per_page=${perPage}&date=${dateRange}&source=2`;
                
                console.log(`🌍 ${isMobileDevice ? '📱' : '💻'} Fetching: ${countryCode}-${indicatorCode}`);
                
                // Mobile timeout handling
                const controller = new AbortController();
                const timeoutId = setTimeout(() => {
                    controller.abort();
                    console.log(`⏰ Timeout: ${countryCode}-${indicatorCode}`);
                }, isMobileDevice ? 8000 : 15000);
                
                const response = await fetch(url, {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/json',
                        'User-Agent': 'EconomicDashboard/1.0'
                    },
                    signal: controller.signal
                });
                
                clearTimeout(timeoutId);
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                
                if (data && data.length >= 2 && data[1] && data[1].length > 0) {
                    const observations = data[1].filter(obs => obs.value !== null && obs.value !== '');
                    
                    if (observations.length > 0) {
                        if (isHistorical) {
                            // Return all historical data
                            return observations.map(obs => ({
                                date: obs.date,
                                value: parseFloat(obs.value),
                                country: obs.country.value,
                                countryCode: obs.countryiso3code,
                                indicator: obs.indicator.value,
                                indicatorCode: obs.indicator.id
                            })).reverse(); // Reverse to get chronological order
                        } else {
                            // Return latest value
                            const latest = observations[0];
                            return {
                                value: parseFloat(latest.value),
                                date: latest.date,
                                country: latest.country.value,
                                countryCode: latest.countryiso3code,
                                indicator: latest.indicator.value,
                                indicatorCode: latest.indicator.id
                            };
                        }
                    }
                }
                
                throw new Error('No valid data found');
                
            } catch (error) {
                console.error(`❌ World Bank API error for ${countryCode}-${indicatorCode}:`, error.message);
                
                // Mobile fallback: provide dummy data to prevent UI breaking
                if (isMobileDevice && (error.name === 'AbortError' || error.name === 'TypeError')) {
                    console.log(`📱 Mobile fallback: providing placeholder for ${countryCode}-${indicatorCode}`);
                    return isHistorical ? [] : {
                        date: '2024',
                        value: 0,
                        country: WORLD_BANK_COUNTRIES[countryCode]?.name || countryCode,
                        countryCode: countryCode,
                        indicator: WORLD_BANK_INDICATORS[indicatorCode]?.nameEng || indicatorCode,
                        indicatorCode: indicatorCode,
                        isFallback: true
                    };
                }
                
                throw error;
            }
        }
        
        // World Bank cache functions
        function getWBCacheKey(countryCode, indicatorCode) {
            return `wb_${countryCode}_${indicatorCode}`;
        }
        
        function getCachedWBData(countryCode, indicatorCode) {
            const cacheKey = getWBCacheKey(countryCode, indicatorCode);
            const cached = localStorage.getItem(cacheKey);
            if (cached) {
                const data = JSON.parse(cached);
                const age = Date.now() - data.timestamp;
                const maxAge = (WB_UPDATE_FREQUENCIES[indicatorCode]?.cacheDays || 90) * 24 * 60 * 60 * 1000;
                if (age < maxAge) {
                    return data.value;
                }
            }
            return null;
        }
        
        function setCachedWBData(countryCode, indicatorCode, data) {
            const cacheKey = getWBCacheKey(countryCode, indicatorCode);
            localStorage.setItem(cacheKey, JSON.stringify({
                value: data,
                timestamp: Date.now()
            }));
        }
        
        // Update World Bank data display
        function updateWBIndicatorDisplay(countryCode, indicatorCode, data, isFromCache = false) {
            const elementId = `wb-${countryCode}-${indicatorCode}`;
            const element = document.getElementById(elementId);
            const dateElement = document.getElementById(`${elementId}-date`);
            
            if (element) {
                const indicatorInfo = WORLD_BANK_INDICATORS[indicatorCode];
                const countryInfo = WORLD_BANK_COUNTRIES[countryCode];
                let displayValue = '';
                let colorClass = 'neutral';
                
                // Handle fallback data for mobile
                if (data.isFallback) {
                    element.textContent = 'No Data';
                    element.className = 'indicator-value mobile-load';
                    if (dateElement) {
                        dateElement.textContent = 'Tap to retry';
                    }
                    return;
                }
                
                // Format display values based on indicator type
                if (indicatorCode.includes('.ZG')) {
                    // Growth rates and percentages
                    displayValue = `${data.value.toFixed(2)}%`;
                    colorClass = data.value > 0 ? 'positive' : data.value < 0 ? 'negative' : 'neutral';
                } else if (indicatorCode.includes('.CD') && !indicatorCode.includes('.ZS')) {
                    // Dollar amounts - handle negative values properly
                    const absValue = Math.abs(data.value);
                    const sign = data.value < 0 ? '-' : '';
                    
                    if (absValue >= 1e12) {
                        displayValue = `${sign}$${(absValue / 1e12).toFixed(2)}T`;
                    } else if (absValue >= 1e9) {
                        displayValue = `${sign}$${(absValue / 1e9).toFixed(1)}B`;
                    } else if (absValue >= 1e6) {
                        displayValue = `${sign}$${(absValue / 1e6).toFixed(0)}M`;
                    } else {
                        displayValue = `${sign}$${absValue.toLocaleString()}`;
                    }
                    
                    // Set color based on value and indicator type
                    if (indicatorCode === 'BN.CAB.XOKA.CD') {
                        // Current Account Balance: negative is red, positive is green
                        colorClass = data.value < 0 ? 'negative' : 'positive';
                    } else {
                        colorClass = data.value < 0 ? 'negative' : 'positive';
                    }
                } else if (indicatorCode.includes('.ZS')) {
                    // Percentage of GDP
                    displayValue = `${data.value.toFixed(1)}%`;
                    colorClass = 'neutral';
                } else {
                    // Default formatting
                    displayValue = `${data.value.toLocaleString()}`;
                    colorClass = 'neutral';
                }
                
                element.textContent = displayValue;
                element.className = `indicator-value ${colorClass}`;
                
                if (dateElement) {
                    const cacheInfo = isFromCache ? ' (cached)' : '';
                    dateElement.textContent = `${data.date}${cacheInfo}`;
                }
                
                // Update cache status
                const cacheElement = document.getElementById(`${elementId}-cache`);
                if (cacheElement) {
                    if (isFromCache) {
                        cacheElement.className = 'cache-status cache-hit';
                        cacheElement.textContent = 'Cached';
                    } else {
                        cacheElement.className = 'cache-status cache-fresh';
                        cacheElement.textContent = 'New';
                    }
                }
            }
        }
        
        // Detect mobile device
        function isMobileDevice() {
            return window.innerWidth <= 768 || /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }
        
        // Load all World Bank data
        async function loadAllWorldBankData(forceUpdate = false) {
            console.log('🌍 Loading World Bank data...');
            
            const refreshBtn = document.getElementById('refreshBtn');
            refreshBtn.disabled = true;
            refreshBtn.innerHTML = '<span style="animation: spin 1s linear infinite;">🔄</span> Loading...';
            
            // Mobile optimization - load core OECD countries on mobile, all OECD on desktop
            const isMobile = isMobileDevice();
            const countries = isMobile ? 
                ['US', 'JP', 'DE', 'GB', 'FR', 'IT', 'CA', 'KR', 'ES', 'AU'] :  // 10 core OECD countries on mobile
                [
                    // All OECD Countries
                    'US', 'JP', 'DE', 'GB', 'FR', 'IT', 'CA', 'KR', 'ES', 'AU', 'MX', 'NL', 'CH', 'BE', 'IE', 'IL', 
                    'AT', 'NO', 'SE', 'PL', 'DK', 'FI', 'CZ', 'PT', 'NZ', 'GR', 'HU', 'SK', 'LU', 'IS', 'SI', 'EE', 
                    'LV', 'LT', 'CL', 'TR', 'CO', 'CR',
                    // Major non-OECD economies
                    'CN', 'IN', 'BR', 'RU'
                ]; // All OECD + major economies on desktop
            
            // Mobile optimization - USE STATIC DATA FOR RELIABILITY
            const isMobile = isMobileDevice();
            
            if (isMobile) {
                console.log('📱 MOBILE DETECTED: Using static data for reliability');
                // Skip API calls entirely on mobile - use static data instead
                setTimeout(() => {
                    loadMobileStaticData();
                }, 500);
                return;
            }
            
            // Desktop: Use API
            const allIndicators = Object.keys(WORLD_BANK_INDICATORS);
            const indicators = allIndicators;
            
            const promises = [];
            loadResults = { wbSuccess: 0, wbFailed: 0, wbCached: 0, errors: [] };
            
            // Show mobile-friendly loading message
            if (isMobile) {
                console.log('📱 Mobile device detected - loading optimized data set');
                refreshBtn.innerHTML = '<span style="animation: spin 1s linear infinite;">🔄</span> Loading (Mobile)...';
            }
            
            countries.forEach(countryCode => {
                indicators.forEach(indicatorCode => {
                    promises.push(loadWorldBankIndicator(countryCode, indicatorCode, forceUpdate));
                });
            });
            
            try {
                const results = await Promise.allSettled(promises);
                console.log(`✅ World Bank data loading completed`);
                
                // On mobile, show a message about lazy loading of additional data
                if (isMobile && !forceUpdate) {
                    console.log('📱 Mobile optimization: Core indicators loaded. Others load on-demand.');
                    // Show mobile-specific success message
                    refreshBtn.innerHTML = '✅ Mobile Data Loaded';
                    setTimeout(() => {
                        refreshBtn.innerHTML = '🔄 Refresh Data';
                    }, 2000);
                    
                    setTimeout(() => {
                        // Preload essential indicators that are commonly accessed
                        const additionalIndicators = ['FP.CPI.TOTL.ZG', 'GC.BAL.CASH.GD.ZS', 'DT.DOD.DECT.CD'];
                        const additionalCountries = ['US', 'CN', 'DE', 'GB', 'FR'];
                        
                        additionalCountries.forEach(country => {
                            additionalIndicators.forEach(indicator => {
                                loadWorldBankIndicator(country, indicator, false);
                            });
                        });
                    }, 2000);
                }
                
                // Charts will only load when clicked by user
                console.log('✅ Data loaded. Click any indicator to view historical chart.');
                
                return results;
            } catch (error) {
                console.error('❌ World Bank data loading failed:', error);
                throw error;
            } finally {
                refreshBtn.disabled = false;
                refreshBtn.innerHTML = '🔄 Refresh Global Economic Data';
            }
        }
        
        // Load individual World Bank indicator
        async function loadWorldBankIndicator(countryCode, indicatorCode, forceUpdate = false) {
            try {
                let data;
                
                // Check cache first
                if (!forceUpdate) {
                    data = getCachedWBData(countryCode, indicatorCode);
                    if (data) {
                        updateWBIndicatorDisplay(countryCode, indicatorCode, data, true);
                        loadResults.wbCached++;
                        return;
                    }
                }
                
                // Fetch from API
                data = await fetchWorldBankData(countryCode, indicatorCode);
                setCachedWBData(countryCode, indicatorCode, data);
                updateWBIndicatorDisplay(countryCode, indicatorCode, data, false);
                loadResults.wbSuccess++;
                
            } catch (error) {
                console.error(`❌ ${countryCode}-${indicatorCode} failed:`, error.message);
                const elementId = `wb-${countryCode}-${indicatorCode}`;
                const element = document.getElementById(elementId);
                if (element) {
                    element.textContent = 'N/A';
                    element.className = 'indicator-value warning';
                }
                loadResults.wbFailed++;
                loadResults.errors.push(`${countryCode}-${indicatorCode}: ${error.message}`);
            }
        }
        
        // Global variables for modal
        let currentModalData = null;
        let currentModalChart = null;
        let currentTimeRange = 'all';
        
        // Show World Bank details in modal popup
        async function showWBDetails(countryCode, indicatorCode, indicatorName) {
            const isMobileDevice = window.innerWidth <= 768 || /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            const countryInfo = WORLD_BANK_COUNTRIES[countryCode] || {name: countryCode, flag: '🌐'};
            const indicatorInfo = WORLD_BANK_INDICATORS[indicatorCode] || {name: indicatorCode, unit: 'N/A'};
            
            // Set modal title and content
            document.getElementById('modalTitle').textContent = 
                `${countryInfo.flag} ${countryInfo.name} - ${indicatorInfo.name}`;
            
            document.getElementById('modalExplanationText').textContent = 
                getWBIndicatorExplanation(indicatorCode);
                
            document.getElementById('modalDataInfo').innerHTML = 
                `<small><strong>Source:</strong> World Bank Open Data | <strong>Unit:</strong> ${indicatorInfo.unit} | <strong>Frequency:</strong> Annual</small>`;
            
            // Show modal
            document.getElementById('chartModal').style.display = 'block';
            
            // Mobile-specific chart handling
            if (isMobileDevice) {
                const modalChart = document.getElementById('modalChart');
                const fallbackData = MOBILE_FALLBACK_DATA[countryCode]?.[indicatorCode];
                
                if (fallbackData) {
                    modalChart.innerHTML = `
                        <div style="
                            display: flex; flex-direction: column; align-items: center; justify-content: center; 
                            height: 280px; background: #f8f9fa; border-radius: 8px; text-align: center;
                            border: 2px dashed #dee2e6; margin: 20px 0;
                        ">
                            <div style="font-size: 3rem; margin-bottom: 10px;">${countryInfo.flag}</div>
                            <div style="font-size: 1.5rem; font-weight: bold; color: #28a745; margin-bottom: 5px;">
                                ${fallbackData.formatted}
                            </div>
                            <div style="font-size: 0.9rem; color: #6c757d; margin-bottom: 10px;">
                                ${indicatorInfo.name}
                            </div>
                            <div style="font-size: 0.8rem; color: #6c757d;">
                                📅 ${fallbackData.date} (Estimated)
                            </div>
                            <div style="font-size: 0.7rem; color: #6c757d; margin-top: 15px; font-style: italic;">
                                📱 Mobile simplified view<br>
                                Tap refresh to attempt live data
                            </div>
                        </div>
                    `;
                } else {
                    modalChart.innerHTML = `
                        <div style="
                            display: flex; flex-direction: column; align-items: center; justify-content: center; 
                            height: 280px; background: #fff3cd; border-radius: 8px; text-align: center;
                            border: 2px dashed #ffc107; margin: 20px 0;
                        ">
                            <div style="font-size: 2rem; margin-bottom: 10px;">📊</div>
                            <div style="font-size: 1.1rem; font-weight: bold; color: #856404; margin-bottom: 10px;">
                                Chart Not Available
                            </div>
                            <div style="font-size: 0.9rem; color: #856404; text-align: center;">
                                Mobile view doesn't support<br>
                                charts for this indicator yet
                            </div>
                        </div>
                    `;
                }
                
                console.log(`📱 Mobile modal shown for ${countryCode}-${indicatorCode}`);
                return;
            }
            
            // Desktop chart loading (existing logic)
            const cacheKey = `wb-${countryCode}-${indicatorCode}`;
            let cachedData = localStorage.getItem(cacheKey);
            
            if (!cachedData) {
                console.log(`Loading ${indicatorCode} for ${countryCode} on-demand`);
                try {
                    await loadWorldBankData(countryCode, indicatorCode);
                    cachedData = localStorage.getItem(cacheKey);
                } catch (error) {
                    console.error('Failed to load data on-demand:', error);
                }
            }
            
            // Store current data for time range filtering
            currentModalData = {countryCode, indicatorCode, countryInfo, indicatorInfo};
            currentTimeRange = '10';
            
            // Reset time range buttons - set 10 years as default
            document.querySelectorAll('.time-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector('.time-btn[onclick="setTimeRange(\'10\')"]').classList.add('active');
            
            // Load chart data
            loadModalChart();
        }
        
        // Close modal
        function closeModal() {
            document.getElementById('chartModal').style.display = 'none';
            if (currentModalChart) {
                currentModalChart.destroy();
                currentModalChart = null;
            }
        }
        
        // Set time range filter
        function setTimeRange(range) {
            currentTimeRange = range;
            
            // Update active button
            document.querySelectorAll('.time-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[onclick="setTimeRange('${range}')"]`).classList.add('active');
            
            // Reload chart with new range
            if (currentModalData) {
                if (currentModalData.countryCode === 'ALL') {
                    // Reload all countries chart
                    loadAllCountriesModalChart(currentModalData.indicatorCode);
                } else {
                    // Reload single country comparison chart
                    loadModalChart();
                }
            }
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('chartModal');
            if (event.target === modal) {
                closeModal();
            }
        }
        
        // Load World Bank chart with historical data
        async function loadWBChart(countryCode, indicatorCode) {
            const loadingDiv = document.getElementById(`loading-${countryCode}-${indicatorCode}`);
            const canvas = document.getElementById(`chart-${countryCode}-${indicatorCode}`);
            
            try {
                console.log(`🔄 Loading chart for ${countryCode}-${indicatorCode}`);
                
                // Fetch historical data
                const historicalData = await fetchWorldBankData(countryCode, indicatorCode, true);
                
                if (historicalData && historicalData.length > 0) {
                    console.log(`✅ Got ${historicalData.length} data points for ${countryCode}-${indicatorCode}`);
                    
                    // Hide loading and show canvas
                    loadingDiv.style.display = 'none';
                    canvas.style.display = 'block';
                    
                    // Prepare chart data
                    const labels = historicalData.map(item => item.date);
                    const values = historicalData.map(item => item.value);
                    
                    // Create chart
                    const ctx = canvas.getContext('2d');
                    new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: labels,
                            datasets: [{
                                data: values,
                                borderColor: '#1f77b4',
                                backgroundColor: 'rgba(31, 119, 180, 0.1)',
                                borderWidth: 2,
                                fill: true
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { display: false }
                            },
                            scales: {
                                x: { title: { display: true, text: 'Year' } },
                                y: { 
                                    title: { display: true, text: WORLD_BANK_INDICATORS[indicatorCode]?.unit || '' },
                                    ticks: {
                                        callback: function(value) {
                                            // Format large numbers
                                            if (Math.abs(value) >= 1e12) {
                                                return (value / 1e12).toFixed(1) + 'T';
                                            } else if (Math.abs(value) >= 1e9) {
                                                return (value / 1e9).toFixed(1) + 'B';
                                            } else if (Math.abs(value) >= 1e6) {
                                                return (value / 1e6).toFixed(1) + 'M';
                                            } else if (Math.abs(value) >= 1e3) {
                                                return (value / 1e3).toFixed(1) + 'K';
                                            }
                                            return value.toLocaleString();
                                        }
                                    }
                                }
                            }
                        }
                    });
                    
                    console.log(`✅ Chart created successfully for ${countryCode}-${indicatorCode}`);
                    
                } else {
                    loadingDiv.innerHTML = '❌ No historical data available';
                    console.log(`❌ No data for ${countryCode}-${indicatorCode}`);
                }
                
            } catch (error) {
                console.error(`❌ Chart error for ${countryCode}-${indicatorCode}:`, error);
                loadingDiv.innerHTML = `❌ Error: ${error.message}`;
            }
        }
        
        // Load chart in modal with time range filtering
        async function loadModalChart() {
            if (!currentModalData) return;
            
            const { countryCode, indicatorCode, countryInfo, indicatorInfo } = currentModalData;
            const loadingDiv = document.getElementById('modalChartLoading');
            const canvas = document.getElementById('modalChart');
            
            try {
                // Show loading
                loadingDiv.style.display = 'block';
                canvas.style.display = 'none';
                
                // Destroy existing chart
                if (currentModalChart) {
                    currentModalChart.destroy();
                    currentModalChart = null;
                }
                
                console.log(`🔄 Loading modal chart for ${countryCode}-${indicatorCode} (${currentTimeRange} years)`);
                
                // Fetch data for all OECD countries + major economies for comparison
                const comparisonCountries = [
                    // All OECD Countries
                    'US', 'JP', 'DE', 'GB', 'FR', 'IT', 'CA', 'KR', 'ES', 'AU', 'MX', 'NL', 'CH', 'BE', 'IE', 'IL', 
                    'AT', 'NO', 'SE', 'PL', 'DK', 'FI', 'CZ', 'PT', 'NZ', 'GR', 'HU', 'SK', 'LU', 'IS', 'SI', 'EE', 
                    'LV', 'LT', 'CL', 'TR', 'CO', 'CR',
                    // Major non-OECD economies
                    'CN', 'IN', 'BR', 'RU'
                ];
                const datasets = [];
                
                let dataCount = 0;
                for (let i = 0; i < comparisonCountries.length; i++) {
                    const country = comparisonCountries[i];
                    try {
                        const historicalData = await fetchWorldBankData(country, indicatorCode, true);
                        
                        if (historicalData && historicalData.length > 0) {
                            // Filter data based on time range
                            let filteredData = historicalData;
                            if (currentTimeRange !== 'all') {
                                const currentYear = new Date().getFullYear();
                                const startYear = currentYear - parseInt(currentTimeRange);
                                filteredData = historicalData.filter(item => parseInt(item.date) >= startYear);
                            }
                            
                            if (filteredData.length > 0) {
                                const labels = filteredData.map(item => item.date);
                                const values = filteredData.map(item => item.value);
                                const countryName = WORLD_BANK_COUNTRIES[country]?.name || country;
                                const countryFlag = WORLD_BANK_COUNTRIES[country]?.flag || '🌐';
                                
                                // Highlight selected country, make others gray
                                const isSelectedCountry = country === countryCode;
                                const borderColor = isSelectedCountry ? '#1f77b4' : '#888888';
                                const backgroundColor = isSelectedCountry ? 'rgba(31, 119, 180, 0.2)' : 'rgba(136, 136, 136, 0.1)';
                                const borderWidth = isSelectedCountry ? 4 : 2;
                                const pointRadius = isSelectedCountry ? 4 : 2;
                                
                                datasets.push({
                                    label: `${countryFlag} ${countryName}`,
                                    data: values,
                                    borderColor: borderColor,
                                    backgroundColor: backgroundColor,
                                    borderWidth: borderWidth,
                                    fill: false,
                                    tension: 0.1,
                                    pointRadius: pointRadius,
                                    pointHoverRadius: isSelectedCountry ? 8 : 5,
                                    _labels: labels // Store labels for this dataset
                                });
                                dataCount++;
                            }
                        }
                    } catch (error) {
                        console.log(`No data for ${country}-${indicatorCode}`);
                    }
                }
                
                if (datasets.length > 0) {
                    // Hide loading and show canvas
                    loadingDiv.style.display = 'none';
                    canvas.style.display = 'block';
                    
                    // Get unique labels from all datasets and sort them
                    const allLabels = new Set();
                    datasets.forEach(dataset => {
                        if (dataset._labels) {
                            dataset._labels.forEach(label => allLabels.add(label));
                        }
                    });
                    
                    // Sort labels chronologically 
                    const labels = Array.from(allLabels).sort((a, b) => parseInt(a) - parseInt(b));
                    
                    // Create chart
                    const ctx = canvas.getContext('2d');
                    currentModalChart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: labels,
                            datasets: datasets
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            interaction: {
                                intersect: false,
                                mode: 'index'
                            },
                            plugins: {
                                title: {
                                    display: true,
                                    text: `${indicatorInfo.name} - Multi-Country Comparison`,
                                    font: { size: 16, weight: 'bold' },
                                    color: '#1f77b4',
                                    padding: 20
                                },
                                legend: { 
                                    display: true,
                                    position: 'top',
                                    labels: {
                                        usePointStyle: true,
                                        padding: 15,
                                        font: { size: 12 }
                                    }
                                },
                                tooltip: {
                                    backgroundColor: 'rgba(0,0,0,0.8)',
                                    titleColor: 'white',
                                    bodyColor: 'white',
                                    borderColor: '#1f77b4',
                                    borderWidth: 1,
                                    titleFont: { size: 14, weight: 'bold' },
                                    bodyFont: { size: 13 },
                                    padding: 12,
                                    cornerRadius: 8
                                }
                            },
                            scales: {
                                x: { 
                                    title: { 
                                        display: true, 
                                        text: 'Year',
                                        font: { size: 14, weight: 'bold' }
                                    },
                                    grid: { color: 'rgba(0,0,0,0.1)' }
                                },
                                y: { 
                                    title: { 
                                        display: true, 
                                        text: indicatorInfo.unit,
                                        font: { size: 14, weight: 'bold' }
                                    },
                                    grid: { color: 'rgba(0,0,0,0.1)' },
                                    ticks: {
                                        callback: function(value) {
                                            // Format large numbers
                                            if (Math.abs(value) >= 1e12) {
                                                return (value / 1e12).toFixed(1) + 'T';
                                            } else if (Math.abs(value) >= 1e9) {
                                                return (value / 1e9).toFixed(1) + 'B';
                                            } else if (Math.abs(value) >= 1e6) {
                                                return (value / 1e6).toFixed(1) + 'M';
                                            } else if (Math.abs(value) >= 1e3) {
                                                return (value / 1e3).toFixed(1) + 'K';
                                            }
                                            return value.toLocaleString();
                                        }
                                    }
                                }
                            }
                        }
                    });
                    
                    console.log(`✅ Multi-country comparison chart created for ${indicatorCode}`);
                    
                } else {
                    loadingDiv.innerHTML = '❌ No historical data available for comparison';
                }
                
            } catch (error) {
                console.error(`❌ Modal chart error:`, error);
                loadingDiv.innerHTML = `❌ Error: ${error.message}`;
            }
        }
        
        // Get World Bank indicator explanations
        function getWBIndicatorExplanation(indicatorCode) {
            const explanations = {
                // 📊 GDP Indicators - Complete Set with English Explanations
                'NY.GDP.MKTP.CD': 'GDP (Nominal, current US$) - Gross Domestic Product at current market prices in US dollars. Represents the total value of all goods and services produced within a country in a given year.',
                'NY.GDP.MKTP.CN': 'GDP (Nominal, local currency) - Gross Domestic Product measured in local currency. Reflects local price levels and currency values.',
                'NY.GDP.MKTP.KD': 'GDP (Real, constant US$) - Real Gross Domestic Product measured in constant 2015 US dollars. Removes inflation to measure actual economic growth.',
                'NY.GDP.PCAP.CD': 'GDP per capita (Nominal, US$) - GDP divided by total population. Provides a measure of average economic output per person and standard of living.',
                'NY.GDP.PCAP.KD': 'GDP per capita (Real, constant US$) - Real GDP divided by total population. Measures actual per-capita economic performance with inflation removed.',
                'NY.GDP.PCAP.PP.CD': 'GDP per capita (PPP, US$) - GDP per capita based on purchasing power parity. Allows comparison of actual purchasing power across countries considering price level differences.',
                'NY.GDP.MKTP.KD.ZG': 'GDP Growth Rate (annual %) - Annual percentage growth rate of real GDP. Key indicator of economic expansion or contraction.',
                'NY.GDP.PCAP.KD.ZG': 'GDP per capita Growth Rate (%) - Annual growth rate of real GDP per capita. Measures improvement in individual-level economic welfare.',
                
                // 📊 GNP Indicators - Complete Set with English Explanations
                'NY.GNP.MKTP.CD': 'GNP (Nominal, current US$) - Gross National Product measured in current US dollars. Represents total income of nationals including income from abroad.',
                'NY.GNP.MKTP.KD': 'GNP (Real, constant US$) - Real Gross National Product. Measures actual changes in national income with inflation removed.',
                'NY.GNP.PCAP.CD': 'GNP per capita (Nominal, US$) - GNP divided by total population. Shows average income level of nationals.',
                'NY.GNP.PCAP.KD': 'GNP per capita (Real, constant US$) - Real GNP per capita. Measures changes in actual individual income levels.',
                'NY.GNP.PCAP.PP.CD': 'GNP per capita (PPP, US$) - GNP per capita based on purchasing power parity. Enables income comparison considering actual purchasing power across countries.',
                'NY.GNP.MKTP.PP.CD': 'GNP (PPP, US$) - Gross National Product based on purchasing power parity. Used for cross-country income comparisons considering actual purchasing power.',
                
                // 📊 Investment Indicators - Complete Set with English Explanations
                'NE.GDI.TOTL.ZS': 'Gross Investment (% of GDP) - Gross capital formation as percentage of GDP. Represents investment level for expanding future productive capacity of the economy.',
                'NE.GDI.TOTL.CD': 'Gross Investment (current US$) - Gross capital formation measured in current US dollars. Shows absolute scale of country investment.',
                'NE.GDI.FTOT.ZS': 'Gross Fixed Investment (% of GDP) - Gross fixed capital formation as percentage of GDP. Measures investment in fixed assets like buildings and equipment.',
                'NE.GDI.FPRV.ZS': 'Private Investment (% of GDP) - Gross fixed capital formation by private sector as percentage of GDP. Shows private sector investment activity.',
                'NE.GDI.FGOV.ZS': 'Government Investment (% of GDP) - Gross fixed capital formation by government sector as percentage of GDP. Shows public infrastructure investment level.',
                
                // 📊 Savings Indicators - Complete Set with English Explanations
                'NY.GNS.ICTR.ZS': 'Gross Savings (% of GDP) - Gross savings rate as percentage of GDP. Ratio of resources saved rather than consumed, available for future investment.',
                'NY.GNS.ICTR.CD': 'Gross Savings (current US$) - Gross savings measured in current US dollars. Shows absolute savings capacity of the country.',
                'NY.GNS.GNFS.ZS': 'National Savings (% of GNI) - Gross national savings rate as percentage of GNI. Measures overall savings propensity of the nation.',
                
                // 📊 Inflation Indicators - Complete Set with English Explanations
                'FP.CPI.TOTL': 'Consumer Price Index (CPI, 2010=100) - Consumer Price Index with 2010 as base year. Measures price changes of goods and services purchased by consumers.',
                'FP.CPI.TOTL.ZG': 'Inflation Rate (Consumer Prices, %) - Year-over-year price increase based on Consumer Price Index. Key indicator of general price level increases.',
                'NY.GDP.DEFL.ZS': 'GDP Deflator (annual %) - Year-over-year change in GDP deflator. Broad price indicator measuring price level changes across the entire economy.',
                'NY.GDP.DEFL.KD.ZG': 'GDP Deflator Change Rate (%) - Growth rate of GDP deflator. Measures economy-wide inflation through difference between nominal and real GDP.',
                'NE.EXP.GNFS.CD': 'Value of all goods and services exported to the rest of the world. Includes merchandise exports and service exports.',
                'NE.IMP.GNFS.CD': 'Value of all goods and services imported from the rest of the world. Includes merchandise imports and service imports.',
                'NE.RSB.GNFS.CD': 'Exports minus imports of goods and services. Positive values indicate trade surplus, negative values indicate trade deficit.',
                'TG.VAL.TOTL.GD.ZS': 'Sum of exports and imports as a share of GDP. Indicates the degree of economic integration with the global economy.',
                'BX.KLT.DINV.CD.WD': 'Net inflows of foreign direct investment. Represents capital provided by foreign investors to acquire lasting management interest in domestic enterprises.',
                'NE.GDI.FTOT.CD': 'Expenditures on additions to fixed assets plus net changes in inventories. Key indicator of domestic investment and future productive capacity.',
                'NE.GDI.TOTL.ZS': 'Gross capital formation as percentage of GDP. Indicates the share of economic output devoted to increasing productive capacity.',
                'BX.KLT.DINV.WD.GD.ZS': 'Foreign direct investment as percentage of GDP. Shows the relative importance of FDI in the national economy.',
                'SP.POP.TOTL': 'Total population count including all residents regardless of legal status or citizenship. Key demographic indicator for economic analysis.',
                'NY.GNP.PCAP.CD': 'Gross National Income per capita in current US dollars. Measures average income earned by residents including income from abroad.',
                'SL.UEM.TOTL.ZS': 'Unemployment rate as percentage of total labor force. Key indicator of labor market health and economic performance.',
                'FP.CPI.TOTL.ZG': 'Annual inflation rate based on consumer price index. Measures the rate at which general price level increases.',
                'GC.BAL.CASH.GD.ZS': 'Government cash surplus or deficit as percentage of GDP. Indicates fiscal health and sustainability.',
                'DT.DOD.DECT.CD': 'Total external debt stocks in current US dollars. Measures country\'s total debt owed to non-residents.',
                'BN.CAB.XOKA.CD': 'Current account balance in current US dollars. Difference between exports and imports plus net income and transfers.',
                'NY.GDP.DEFL.ZS': 'GDP deflator index measuring price changes in domestic production. Used to convert nominal GDP to real GDP.',
                
                // 📈 Economic Growth & Productivity - Additional Indicators
                'NY.GNI.PCAP.CD': 'GNI per capita using the Atlas method conversion. Measures average national income per person with exchange rate adjustments.',
                'NY.GDP.PCAP.KD.ZG': 'Annual growth rate of GDP per capita in constant prices. Shows economic progress at the individual level.',
                'NY.GNS.ICTR.ZS': 'Gross national savings as percentage of GDP. Indicates how much of national income is saved rather than consumed.',
                'NV.AGR.TOTL.ZS': 'Agriculture, forestry, and fishing value added as percentage of GDP. Shows importance of primary sector in economy.',
                'NV.IND.TOTL.ZS': 'Industry value added as percentage of GDP, including manufacturing, mining, and construction. Key indicator of industrialization.',
                'NV.SRV.TOTL.ZS': 'Services value added as percentage of GDP. Includes finance, retail, hospitality, and other tertiary activities.',
                
                // 📊 Inflation & Price Indices - Additional Indicators
                'FP.PRI.INDEX': 'Food production index measuring agricultural output. Base year 2014-2016 = 100. Tracks food security and agricultural productivity.',
                'NY.GDP.DEFL.KD.ZG': 'GDP deflator annual growth rate. Measures domestic price inflation across all sectors of the economy.',
                'CPTOTSAXN': 'Core consumer price index excluding volatile food and energy prices. Better measure of underlying inflation trends.',
                
                // 🏛️ Fiscal & Government Indicators - Additional Indicators
                'GC.REV.XGRT.GD.ZS': 'Government revenue excluding grants as percentage of GDP. Measures fiscal capacity and tax collection efficiency.',
                'GC.XPN.TOTL.GD.ZS': 'Total government expenditure as percentage of GDP. Shows size of public sector spending relative to economy.',
                'GC.TAX.TOTL.GD.ZS': 'Tax revenue as percentage of GDP. Core measure of government fiscal capacity and tax burden.',
                'GC.DOD.TOTL.GD.ZS': 'Central government debt as percentage of GDP. Key indicator of fiscal sustainability and debt burden.',
                
                // 🌍 Trade & Balance of Payments - Additional Indicators
                'BN.CAB.XOKA.GD.ZS': 'Current account balance as percentage of GDP. Shows net flow of goods, services, and transfers relative to economy size.',
                'NE.TRD.GNFS.ZS': 'Trade in goods and services as percentage of GDP. Measures openness of economy to international trade.',
                'NE.EXP.GNFS.ZS': 'Exports of goods and services as percentage of GDP. Shows export competitiveness and external demand.',
                'NE.IMP.GNFS.ZS': 'Imports of goods and services as percentage of GDP. Indicates domestic demand for foreign goods and services.',
                'BX.KLT.DINV.WD.GD.ZS': 'Foreign direct investment net inflows as percentage of GDP. Measures international investment confidence.',
                
                // 👥 Labor Markets - Additional Indicators
                'SL.TLF.TOTL.IN': 'Total labor force including employed and unemployed seeking work. Foundation for labor market analysis.',
                'SL.AGR.EMPL.ZS': 'Employment in agriculture as percentage of total employment. Shows economic structure and development level.',
                'SL.IND.EMPL.ZS': 'Employment in industry as percentage of total employment. Indicates industrialization and manufacturing capacity.',
                'SL.SRV.EMPL.ZS': 'Employment in services as percentage of total employment. Shows transition to service-based economy.',
                'SL.TLF.CACT.ZS': 'Labor force participation rate for population aged 15+. Measures active engagement in labor market.',
                'SL.UEM.1524.ZS': 'Youth unemployment rate for ages 15-24. Critical indicator of youth employment opportunities.',
                
                // 📊 Social/Demographics - Additional Indicators
                'SP.DYN.LE00.IN': 'Life expectancy at birth in years. Key measure of health outcomes and living standards.',
                'SE.ADT.LITR.ZS': 'Adult literacy rate for population 15+. Fundamental indicator of education and human development.',
                'SH.DYN.MORT': 'Under-5 mortality rate per 1,000 live births. Critical health and development indicator for children.',
                'SP.DYN.TFRT.IN': 'Total fertility rate - average births per woman. Important for population growth and demographic planning.',
                'SP.URB.TOTL.IN.ZS': 'Urban population as percentage of total. Shows urbanization trends and development patterns.',
                'SP.DYN.CBRT.IN': 'Crude birth rate per 1,000 people. Basic measure of population growth and demographic dynamics.',
                'SP.DYN.CDRT.IN': 'Crude death rate per 1,000 people. Indicator of health conditions and population dynamics.',
                
                // 🌱 Environment & Energy - Additional Indicators
                'EN.ATM.CO2E.PC': 'CO2 emissions per capita in metric tons. Key climate indicator showing individual carbon footprint.',
                'EG.USE.PCAP.KG.OE': 'Energy use per capita in kg oil equivalent. Measures energy consumption intensity and efficiency.',
                'AG.LND.FRST.ZS': 'Forest area as percentage of land area. Important indicator of environmental conservation and sustainability.',
                'EG.ELC.ACCS.ZS': 'Access to electricity as percentage of population. Basic infrastructure indicator for development.',
                'EN.ATM.CO2E.KT': 'Total CO2 emissions in kilotons. National-level climate impact and environmental responsibility indicator.',
                'EG.USE.COMM.GD.PP.KD': 'Energy intensity of GDP in MJ per PPP dollar. Measures energy efficiency of economic production.'
            };
            
            return explanations[indicatorCode] || `This indicator tracks ${WORLD_BANK_INDICATORS[indicatorCode]?.nameEng || WORLD_BANK_INDICATORS[indicatorCode]?.name || indicatorCode}. Data is sourced from the World Bank Open Data platform.`;
        }
        
        // Show all countries chart with different colors
        function showAllCountriesChart(indicatorCode, indicatorName) {
            console.log(`🌍 Loading all countries chart for ${indicatorCode}`);
            
            const indicatorInfo = WORLD_BANK_INDICATORS[indicatorCode] || {name: indicatorCode, unit: 'N/A'};
            
            // Set modal title and content
            document.getElementById('modalTitle').textContent = 
                `🌍 All Countries - ${indicatorInfo.name}`;
            
            document.getElementById('modalExplanationText').textContent = 
                getWBIndicatorExplanation(indicatorCode);
                
            document.getElementById('modalDataInfo').innerHTML = 
                `<small><strong>Source:</strong> World Bank Open Data | <strong>Unit:</strong> ${indicatorInfo.unit} | <strong>Frequency:</strong> Annual</small>`;
            
            // Show modal
            document.getElementById('chartModal').style.display = 'block';
            
            // Store current data for time range filtering
            currentModalData = {countryCode: 'ALL', indicatorCode, countryInfo: {name: 'All Countries', flag: '🌍'}, indicatorInfo};
            currentTimeRange = '10';
            
            // Reset time range buttons - set 10 years as default
            document.querySelectorAll('.time-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector('.time-btn[onclick="setTimeRange(\'10\')"]').classList.add('active');
            
            // Load multi-country chart
            loadAllCountriesModalChart(indicatorCode);
        }
        
        // Load multi-country chart with different colors for each country
        async function loadAllCountriesModalChart(indicatorCode) {
            const loadingDiv = document.getElementById('modalChartLoading');
            const canvas = document.getElementById('modalChart');
            
            // Hide canvas and show loading
            canvas.style.display = 'none';
            loadingDiv.style.display = 'block';
            
            try {
                if (currentModalChart) {
                    currentModalChart.destroy();
                    currentModalChart = null;
                }
                
                console.log(`🔄 Loading all countries chart for ${indicatorCode} (${currentTimeRange} years)`);
                
                // All OECD countries + major economies with different colors
                const allCountries = [
                    // All OECD Countries
                    'US', 'JP', 'DE', 'GB', 'FR', 'IT', 'CA', 'KR', 'ES', 'AU', 'MX', 'NL', 'CH', 'BE', 'IE', 'IL', 
                    'AT', 'NO', 'SE', 'PL', 'DK', 'FI', 'CZ', 'PT', 'NZ', 'GR', 'HU', 'SK', 'LU', 'IS', 'SI', 'EE', 
                    'LV', 'LT', 'CL', 'TR', 'CO', 'CR',
                    // Major non-OECD economies
                    'CN', 'IN', 'BR', 'RU'
                ];
                const countryColors = [
                    '#1f77b4', '#ff7f0e', '#2ca02c', '#d62728', '#9467bd', '#8c564b', '#e377c2', '#7f7f7f',
                    '#bcbd22', '#17becf', '#aec7e8', '#ffbb78', '#98df8a', '#ff9896', '#c5b0d5', '#c49c94',
                    '#ff6384', '#36a2eb', '#cc65fe', '#ffce56', '#4bc0c0', '#9966ff', '#ff9f40', '#ff6384',
                    '#c9cbcf', '#4bc0c0', '#36a2eb', '#ff6384', '#ff9f40', '#ffce56', '#4bc0c0', '#9966ff',
                    '#ff6384', '#36a2eb', '#cc65fe', '#ffce56', '#4bc0c0', '#9966ff', '#ff9f40', '#ff6384'
                ];
                const datasets = [];
                
                let dataCount = 0;
                for (let i = 0; i < allCountries.length; i++) {
                    const country = allCountries[i];
                    try {
                        const historicalData = await fetchWorldBankData(country, indicatorCode, true);
                        
                        if (historicalData && historicalData.length > 0) {
                            // Filter data based on time range
                            let filteredData = historicalData;
                            if (currentTimeRange !== 'all') {
                                const currentYear = new Date().getFullYear();
                                const startYear = currentYear - parseInt(currentTimeRange);
                                filteredData = historicalData.filter(item => parseInt(item.date) >= startYear);
                            }
                            
                            if (filteredData.length > 0) {
                                const labels = filteredData.map(item => item.date);
                                const values = filteredData.map(item => item.value);
                                const countryName = WORLD_BANK_COUNTRIES[country]?.name || country;
                                const countryFlag = WORLD_BANK_COUNTRIES[country]?.flag || '🌐';
                                
                                datasets.push({
                                    label: `${countryFlag} ${countryName}`,
                                    data: values,
                                    borderColor: countryColors[i % countryColors.length],
                                    backgroundColor: countryColors[i % countryColors.length] + '20',
                                    borderWidth: 2,
                                    fill: false,
                                    tension: 0.1,
                                    pointRadius: 3,
                                    pointHoverRadius: 6,
                                    _labels: labels
                                });
                                dataCount++;
                            }
                        }
                    } catch (error) {
                        console.log(`No data for ${country}-${indicatorCode}`);
                    }
                }
                
                if (datasets.length > 0) {
                    // Hide loading and show canvas
                    loadingDiv.style.display = 'none';
                    canvas.style.display = 'block';
                    
                    // Get unique labels from all datasets and sort them
                    const allLabels = new Set();
                    datasets.forEach(dataset => {
                        if (dataset._labels) {
                            dataset._labels.forEach(label => allLabels.add(label));
                        }
                    });
                    
                    // Sort labels chronologically 
                    const labels = Array.from(allLabels).sort((a, b) => parseInt(a) - parseInt(b));
                    
                    // Create chart
                    const ctx = canvas.getContext('2d');
                    currentModalChart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: labels,
                            datasets: datasets
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { 
                                    display: true,
                                    position: 'top',
                                    labels: {
                                        usePointStyle: true,
                                        padding: 8,
                                        font: { size: 10 },
                                        boxWidth: 12
                                    }
                                },
                                tooltip: {
                                    backgroundColor: 'rgba(0,0,0,0.8)',
                                    titleColor: 'white',
                                    bodyColor: 'white',
                                    borderColor: '#1f77b4',
                                    borderWidth: 1,
                                    titleFont: { size: 14, weight: 'bold' },
                                    bodyFont: { size: 13 },
                                    padding: 12,
                                    cornerRadius: 8
                                }
                            },
                            scales: {
                                x: { 
                                    title: {
                                        display: true,
                                        text: 'Year',
                                        font: { size: 14, weight: 'bold' }
                                    }
                                },
                                y: { 
                                    title: {
                                        display: true,
                                        text: WORLD_BANK_INDICATORS[indicatorCode]?.unit || '',
                                        font: { size: 14, weight: 'bold' }
                                    },
                                    ticks: {
                                        callback: function(value) {
                                            // Format large numbers
                                            if (Math.abs(value) >= 1e12) {
                                                return (value / 1e12).toFixed(1) + 'T';
                                            } else if (Math.abs(value) >= 1e9) {
                                                return (value / 1e9).toFixed(1) + 'B';
                                            } else if (Math.abs(value) >= 1e6) {
                                                return (value / 1e6).toFixed(1) + 'M';
                                            } else if (Math.abs(value) >= 1e3) {
                                                return (value / 1e3).toFixed(1) + 'K';
                                            }
                                            return value;
                                        }
                                    }
                                }
                            }
                        }
                    });
                    
                    console.log(`✅ All countries chart loaded with ${datasets.length} countries`);
                    
                } else {
                    loadingDiv.innerHTML = '❌ No historical data available for comparison';
                }
                
            } catch (error) {
                console.error(`❌ All countries chart error:`, error);
                loadingDiv.innerHTML = `❌ Error: ${error.message}`;
            }
        }
        
        // Auto-load World Bank charts on page load
        function autoLoadWBCharts() {
            const priorityWBCharts = [
                {country: 'US', indicator: 'NY.GDP.MKTP.KD.ZG'}, // US GDP Growth
                {country: 'CN', indicator: 'NY.GDP.MKTP.KD.ZG'}, // China GDP Growth
                {country: 'US', indicator: 'NY.GDP.MKTP.CD'},    // US GDP Nominal
                {country: 'CN', indicator: 'NY.GDP.MKTP.CD'},    // China GDP Nominal
                {country: 'KR', indicator: 'NY.GDP.MKTP.KD.ZG'}, // Korea GDP Growth
            ];
            
            priorityWBCharts.forEach((chart, index) => {
                setTimeout(() => {
                    showWBDetails(chart.country, chart.indicator, WORLD_BANK_INDICATORS[chart.indicator]?.name || chart.indicator);
                }, index * 800); // Stagger loading by 800ms each for World Bank API rate limits
            });
        }
        
        // Download World Bank data
        async function downloadWBData(countryCode, indicatorCode, format) {
            try {
                console.log(`Downloading ${countryCode}-${indicatorCode} data in ${format} format...`);
                
                const historicalData = await fetchWorldBankData(countryCode, indicatorCode, true);
                
                if (!historicalData || historicalData.length === 0) {
                    alert('No data available for download');
                    return;
                }
                
                const countryInfo = WORLD_BANK_COUNTRIES[countryCode];
                const indicatorInfo = WORLD_BANK_INDICATORS[indicatorCode];
                const filename = `WB_${countryCode}_${indicatorCode}_${indicatorInfo?.name?.replace(/[^a-zA-Z0-9]/g, '_') || indicatorCode}_${new Date().toISOString().split('T')[0]}`;
                
                if (format === 'csv') {
                    downloadWBAsCSV(historicalData, filename, countryInfo, indicatorInfo);
                } else if (format === 'excel') {
                    downloadWBAsExcel(historicalData, filename, countryInfo, indicatorInfo);
                }
                
            } catch (error) {
                console.error('World Bank download error:', error);
                alert('Download failed. Please try again.');
            }
        }
        
        // Download World Bank data as CSV
        function downloadWBAsCSV(data, filename, countryInfo, indicatorInfo) {
            const headers = ['Year', 'Value', 'Country', 'Country_Code', 'Indicator', 'Indicator_Code', 'Unit'];
            const csvContent = [
                headers.join(','),
                ...data.map(row => [
                    row.date,
                    row.value,
                    `"${row.country}"`,
                    row.countryCode,
                    `"${row.indicator}"`,
                    row.indicatorCode,
                    `"${indicatorInfo?.unit || ''}"`
                ].join(','))
            ].join('\n');
            
            downloadFile(csvContent, `${filename}.csv`, 'text/csv');
        }
        
        // Download World Bank data as Excel
        function downloadWBAsExcel(data, filename, countryInfo, indicatorInfo) {
            const headers = ['Year', 'Value', 'Country', 'Country_Code', 'Indicator', 'Indicator_Code', 'Unit', 'Source'];
            const csvContent = [
                headers.join(','),
                ...data.map(row => [
                    row.date,
                    row.value,
                    `"${row.country}"`,
                    row.countryCode,
                    `"${row.indicator}"`,
                    row.indicatorCode,
                    `"${indicatorInfo?.unit || ''}"`,
                    '"World Bank Open Data"'
                ].join(','))
            ].join('\n');
            
            const bomContent = '\uFEFF' + csvContent;
            downloadFile(bomContent, `${filename}.csv`, 'text/csv');
        }
        
        // Generic file download function
        function downloadFile(content, filename, mimeType) {
            const blob = new Blob([content], { type: mimeType });
            const url = window.URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            
            window.URL.revokeObjectURL(url);
            document.body.removeChild(a);
        }

        // Generate indicator HTML for all OECD countries
        function generateOECDIndicators() {
            const oecdCountries = [
                'US', 'JP', 'DE', 'GB', 'FR', 'IT', 'CA', 'KR', 'ES', 'AU', 'MX', 'NL', 'CH', 'BE', 'IE', 'IL', 
                'AT', 'NO', 'SE', 'PL', 'DK', 'FI', 'CZ', 'PT', 'NZ', 'GR', 'HU', 'SK', 'LU', 'IS', 'SI', 'EE', 
                'LV', 'LT', 'CL', 'TR', 'CO', 'CR'
            ];
            
            // Find all indicator groups and add OECD countries to them
            const indicatorGroups = document.querySelectorAll('.wb-indicator-group .wb-indicators');
            
            indicatorGroups.forEach(group => {
                const firstIndicator = group.querySelector('.wb-indicator');
                if (!firstIndicator) return;
                
                // Extract indicator code from the first indicator
                const onclick = firstIndicator.getAttribute('onclick');
                const match = onclick.match(/showWBDetails\('([^']+)', '([^']+)', '([^']+)'/);
                if (!match) return;
                
                const indicatorCode = match[2];
                const indicatorName = match[3];
                
                // Get existing countries to avoid duplicates
                const existingCountries = Array.from(group.querySelectorAll('.wb-indicator')).map(el => {
                    const onclickAttr = el.getAttribute('onclick');
                    const countryMatch = onclickAttr.match(/showWBDetails\('([^']+)'/);
                    return countryMatch ? countryMatch[1] : null;
                }).filter(Boolean);
                
                // Add missing OECD countries
                oecdCountries.forEach(countryCode => {
                    if (existingCountries.includes(countryCode)) return;
                    
                    const countryInfo = WORLD_BANK_COUNTRIES[countryCode];
                    if (!countryInfo) return;
                    
                    const indicatorHtml = `
                        <div class="indicator wb-indicator" onclick="showWBDetails('${countryCode}', '${indicatorCode}', '${indicatorName}')">
                            <div class="cache-status cache-loading" id="wb-${countryCode}-${indicatorCode}-cache">Loading</div>
                            <div>
                                <div class="indicator-name">${countryInfo.flag} ${countryInfo.name}</div>
                                <div class="indicator-date" id="wb-${countryCode}-${indicatorCode}-date">-</div>
                            </div>
                            <div class="indicator-value loading" id="wb-${countryCode}-${indicatorCode}">Loading...</div>
                        </div>
                    `;
                    
                    group.insertAdjacentHTML('beforeend', indicatorHtml);
                });
            });
        }
        
        // Mobile fallback with static data when API fails
        const MOBILE_FALLBACK_DATA = {
            'US': {
                'NY.GDP.MKTP.CD': { value: 26854599000000, date: '2023', formatted: '$26.9T' },
                'NY.GDP.MKTP.KD.ZG': { value: 2.5, date: '2023', formatted: '2.5%' },
                'SP.POP.TOTL': { value: 334914895, date: '2023', formatted: '335M' },
                'SL.UEM.TOTL.ZS': { value: 3.7, date: '2023', formatted: '3.7%' },
                'NE.EXP.GNFS.CD': { value: 2108000000000, date: '2023', formatted: '$2.1T' },
                'NE.IMP.GNFS.CD': { value: 3017000000000, date: '2023', formatted: '$3.0T' },
                'FP.CPI.TOTL.ZG': { value: 4.1, date: '2023', formatted: '4.1%' }
            },
            'CN': {
                'NY.GDP.MKTP.CD': { value: 17734062645371, date: '2023', formatted: '$17.7T' },
                'NY.GDP.MKTP.KD.ZG': { value: 5.2, date: '2023', formatted: '5.2%' },
                'SP.POP.TOTL': { value: 1425887337, date: '2023', formatted: '1.43B' },
                'SL.UEM.TOTL.ZS': { value: 5.2, date: '2023', formatted: '5.2%' },
                'NE.EXP.GNFS.CD': { value: 3363000000000, date: '2023', formatted: '$3.4T' },
                'NE.IMP.GNFS.CD': { value: 2560000000000, date: '2023', formatted: '$2.6T' },
                'FP.CPI.TOTL.ZG': { value: 0.2, date: '2023', formatted: '0.2%' }
            },
            'JP': {
                'NY.GDP.MKTP.CD': { value: 4937422400000, date: '2023', formatted: '$4.9T' },
                'NY.GDP.MKTP.KD.ZG': { value: 1.9, date: '2023', formatted: '1.9%' },
                'SP.POP.TOTL': { value: 124516650, date: '2023', formatted: '125M' },
                'SL.UEM.TOTL.ZS': { value: 2.6, date: '2023', formatted: '2.6%' },
                'NE.EXP.GNFS.CD': { value: 728000000000, date: '2023', formatted: '$728B' },
                'NE.IMP.GNFS.CD': { value: 781000000000, date: '2023', formatted: '$781B' },
                'FP.CPI.TOTL.ZG': { value: 3.3, date: '2023', formatted: '3.3%' }
            },
            'DE': {
                'NY.GDP.MKTP.CD': { value: 4259935165000, date: '2023', formatted: '$4.3T' },
                'NY.GDP.MKTP.KD.ZG': { value: -0.3, date: '2023', formatted: '-0.3%' },
                'SP.POP.TOTL': { value: 84482267, date: '2023', formatted: '84.5M' },
                'SL.UEM.TOTL.ZS': { value: 3.0, date: '2023', formatted: '3.0%' },
                'NE.EXP.GNFS.CD': { value: 1878000000000, date: '2023', formatted: '$1.9T' },
                'NE.IMP.GNFS.CD': { value: 1725000000000, date: '2023', formatted: '$1.7T' },
                'FP.CPI.TOTL.ZG': { value: 5.9, date: '2023', formatted: '5.9%' }
            },
            'KR': {
                'NY.GDP.MKTP.CD': { value: 2080685000000, date: '2023', formatted: '$2.1T' },
                'NY.GDP.MKTP.KD.ZG': { value: 3.1, date: '2023', formatted: '3.1%' },
                'SP.POP.TOTL': { value: 51784059, date: '2023', formatted: '51.8M' },
                'SL.UEM.TOTL.ZS': { value: 2.9, date: '2023', formatted: '2.9%' },
                'NE.EXP.GNFS.CD': { value: 683000000000, date: '2023', formatted: '$683B' },
                'NE.IMP.GNFS.CD': { value: 645000000000, date: '2023', formatted: '$645B' },
                'FP.CPI.TOTL.ZG': { value: 3.6, date: '2023', formatted: '3.6%' }
            }
        };
        
        // Load static data directly for mobile (bypass API completely)
        function loadMobileStaticData() {
            console.log('📱 Loading static data for mobile...');
            
            const mobileCountries = ['US', 'CN', 'JP', 'DE', 'KR'];
            const mobileIndicators = [
                'NY.GDP.MKTP.CD', 'NY.GDP.MKTP.KD.ZG', 'SP.POP.TOTL', 'SL.UEM.TOTL.ZS', 
                'NE.EXP.GNFS.CD', 'NE.IMP.GNFS.CD', 'FP.CPI.TOTL.ZG'
            ];
            
            let loaded = 0;
            const total = mobileCountries.length * mobileIndicators.length;
            
            mobileCountries.forEach(countryCode => {
                mobileIndicators.forEach(indicatorCode => {
                    const elementId = `wb-${countryCode}-${indicatorCode}`;
                    const element = document.getElementById(elementId);
                    const dateElement = document.getElementById(`${elementId}-date`);
                    
                    if (element) {
                        const staticData = MOBILE_FALLBACK_DATA[countryCode]?.[indicatorCode];
                        if (staticData) {
                            element.textContent = staticData.formatted;
                            element.className = 'indicator-value neutral';
                            if (dateElement) {
                                dateElement.textContent = `${staticData.date} (static)`;
                            }
                            loaded++;
                        }
                    }
                });
            });
            
            // Update refresh button
            const refreshBtn = document.getElementById('refreshBtn');
            if (refreshBtn) {
                refreshBtn.innerHTML = `📱 Mobile Ready (${loaded}/${total} indicators)`;
                refreshBtn.disabled = false;
            }
            
            console.log(`📱 Mobile static data loaded: ${loaded}/${total} indicators`);
        }
        
        // Set mobile loading states - with fallback data
        function setMobileLoadingStates() {
            const mobileIndicators = [
                'NY.GDP.MKTP.CD', 'NY.GDP.MKTP.KD.ZG', 'SP.POP.TOTL', 'SL.UEM.TOTL.ZS', 
                'NE.EXP.GNFS.CD', 'NE.IMP.GNFS.CD', 'FP.CPI.TOTL.ZG'
            ];
            
            const mobileCountries = ['US', 'CN', 'JP', 'DE', 'KR'];
            
            console.log('📱 Setting mobile-optimized loading states with fallback data');
            
            // Use fallback data for mobile
            mobileCountries.forEach(countryCode => {
                mobileIndicators.forEach(indicatorCode => {
                    const elementId = `wb-${countryCode}-${indicatorCode}`;
                    const element = document.getElementById(elementId);
                    const dateElement = document.getElementById(`${elementId}-date`);
                    
                    if (element && element.textContent === 'Loading...') {
                        const fallbackData = MOBILE_FALLBACK_DATA[countryCode]?.[indicatorCode];
                        if (fallbackData) {
                            element.textContent = fallbackData.formatted;
                            element.className = 'indicator-value neutral';
                            if (dateElement) {
                                dateElement.textContent = `${fallbackData.date} (est.)`;
                            }
                        } else {
                            element.textContent = 'No Data';
                            element.className = 'indicator-value mobile-load';
                        }
                    }
                });
            });
            
            // Update indicators not in mobile set
            Object.keys(WORLD_BANK_INDICATORS).forEach(indicatorCode => {
                if (!mobileIndicators.includes(indicatorCode)) {
                    mobileCountries.forEach(countryCode => {
                        const elementId = `wb-${countryCode}-${indicatorCode}`;
                        const element = document.getElementById(elementId);
                        if (element && element.textContent === 'Loading...') {
                            element.textContent = 'Tap to Load';
                            element.className = 'indicator-value mobile-load';
                        }
                    });
                }
            });
            
            // Show mobile-specific success message
            const refreshBtn = document.getElementById('refreshBtn');
            if (refreshBtn) {
                refreshBtn.innerHTML = '📱 Mobile Data Loaded (Estimated)';
                setTimeout(() => {
                    refreshBtn.innerHTML = '🔄 Refresh Data';
                }, 3000);
            }
        }
        
        // Page load initialization
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🌍 Global Economic Dashboard 2025 loading started');
            
            // Generate OECD indicators for all sections
            generateOECDIndicators();
            
            updateClock();
            setInterval(updateClock, 1000); // Update clock every second
            
            // Load World Bank data
            loadAllWorldBankData();
            
            // Set mobile-specific loading states after initial load
            if (isMobileDevice()) {
                console.log('📱 Mobile device detected, applying mobile optimizations');
                
                // Add mobile debug panel
                const debugPanel = document.createElement('div');
                debugPanel.id = 'mobile-debug';
                debugPanel.style.cssText = `
                    position: fixed; bottom: 10px; left: 10px; right: 10px; 
                    background: rgba(0,0,0,0.8); color: white; padding: 10px; 
                    font-size: 12px; border-radius: 8px; z-index: 1000;
                    max-height: 100px; overflow-y: auto;
                `;
                debugPanel.innerHTML = '<strong>📱 Mobile Debug:</strong><br><span id="debug-text">Loading mobile data...</span>';
                document.body.appendChild(debugPanel);
                
                // Update debug info
                const updateDebug = (msg) => {
                    const debugText = document.getElementById('debug-text');
                    if (debugText) {
                        debugText.innerHTML += '<br>' + msg;
                        debugPanel.scrollTop = debugPanel.scrollHeight;
                    }
                };
                
                // Test basic API connectivity
                setTimeout(async () => {
                    updateDebug('Testing API connectivity...');
                    try {
                        const testUrl = 'https://api.worldbank.org/v2/country/US/indicator/NY.GDP.MKTP.CD?format=json&per_page=1&date=2020:2024';
                        updateDebug('Fetching: ' + testUrl);
                        
                        const response = await fetch(testUrl);
                        updateDebug('Response status: ' + response.status);
                        
                        if (response.ok) {
                            const data = await response.json();
                            updateDebug('Data received: ' + (data && data.length ? 'Success' : 'No data'));
                        } else {
                            updateDebug('HTTP Error: ' + response.statusText);
                        }
                    } catch (error) {
                        updateDebug('Error: ' + error.message);
                    }
                }, 1000);
                
                setTimeout(() => {
                    setMobileLoadingStates();
                    updateDebug('Mobile states updated');
                }, 3000);
                
                setTimeout(() => {
                    debugPanel.remove();
                }, 20000); // Remove debug panel after 20 seconds
            }
        });
    </script>
</body>
</html>